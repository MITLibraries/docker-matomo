(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["SearchEngineKeywordsPerformance"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["SearchEngineKeywordsPerformance"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,n){return function(e){var t={};function n(c){if(t[c])return t[c].exports;var o=t[c]={i:c,l:!1,exports:{}};return e[c].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,c){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(c,o,function(t){return e[t]}.bind(null,o));return c},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/SearchEngineKeywordsPerformance/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},a5a2:function(e,t){e.exports=n},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"AdminPage",(function(){return N})),n.d(t,"BingConfiguration",(function(){return _e})),n.d(t,"GoogleConfiguration",(function(){return mn})),n.d(t,"YandexConfiguration",(function(){return Fc})),n.d(t,"ConfigureConnection",(function(){return ro})),"undefined"!==typeof window){var c=window.document.currentScript,o=c&&c.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(n.p=o[1])}var r=n("8bbf");const l={class:"keywordproviders"},a=Object(r["createElementVNode"])("div",{class:"clear"},null,-1);function i(e,t,n,c,o,i){const s=Object(r["resolveComponent"])("Provider"),d=Object(r["resolveComponent"])("ContentBlock");return Object(r["openBlock"])(),Object(r["createBlock"])(d,{"content-title":e.translate("SearchEngineKeywordsPerformance_SearchEngineKeywordsPerformance")},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigurationDescription")),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ProviderListDescription")),1),Object(r["createElementVNode"])("div",l,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.providers,e=>(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:e.id,provider:e},null,8,["provider"]))),128)),a])]),_:1},8,["content-title"])}var s=n("19dc");const d=["title"],u=["src","alt"],b=["innerHTML"],m=["innerHTML"],O={key:0,class:"experimental"},j=["href"],p={key:0,class:"btn"},g={key:1,class:"btn"};function y(e,t,n,c,o,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:Object(r["normalizeClass"])({keywordprovider:!0,warning:e.hasWarning,configured:!e.hasWarning&&e.provider.is_configured})},[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.provider.logos,(t,n)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:n,class:Object(r["normalizeClass"])("logo "+(e.provider.logos.length>1?"double":"")),title:e.logoTooltip},[Object(r["createElementVNode"])("img",{src:t,alt:e.provider.name},null,8,u)],10,d))),128)),Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.provider.name),1),Object(r["createElementVNode"])("p",{innerHTML:e.$sanitize(e.provider.description)},null,8,b),Object(r["createElementVNode"])("p",null,[Object(r["createElementVNode"])("em",{innerHTML:e.$sanitize(e.provider.note)},null,8,m)]),e.provider.is_experimental?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",O,"experimental")):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("a",{href:e.configureUrl,class:"cta"},[e.provider.is_configured?(Object(r["openBlock"])(),Object(r["createElementBlock"])("button",p,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ChangeConfiguration")),1)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("button",g,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_SetupConfiguration")),1))],8,j)],2)}var f=Object(r["defineComponent"])({props:{provider:{type:Object,required:!0}},computed:{hasWarning(){const e=this.provider;return e.is_configured&&(0===Object.keys(e.configured_site_ids).length||Object.keys(e.problems.sites).length||Object.keys(e.problems.accounts).length)},logoTooltip(){const e=this.provider,t=e.is_configured&&0===Object.keys(e.configured_site_ids).length;return t?Object(s["translate"])("SearchEngineKeywordsPerformance_ConfigAvailableNoWebsiteConfigured"):e.is_configured?Object(s["translate"])("SearchEngineKeywordsPerformance_IntegrationConfigured"):Object(s["translate"])("SearchEngineKeywordsPerformance_IntegrationNotConfigured")},configureUrl(){return"?"+s["MatomoUrl"].stringify(Object.assign(Object.assign({},s["MatomoUrl"].urlParsed.value),{},{action:"configure"+this.provider.id}))}}});f.render=y;var E=f,h=Object(r["defineComponent"])({props:{providers:{type:Array,required:!0}},components:{ContentBlock:s["ContentBlock"],Provider:E}});h.render=i;var N=h;const V={class:"ui-confirm",id:"confirmRemoveAccountConfig",ref:"confirmRemoveAccountConfig"},S=["value"],v=["value"],k={class:"measurableList"},C=Object(r["createElementVNode"])("th",null,null,-1),A={key:0},w={colspan:"6"},B={key:0,class:"icon-error"},D={key:0,class:"icon-error"},_=["onSubmit"],T=["value"],P=["value"],K=["title"],x={key:1},U={colspan:"6",align:"right"},M={key:2,class:"configureMeasurableForm"},I={colspan:"2"},L={class:"bingAccountAndUrlToAdd"},F={colspan:"3"},G={action:"",method:"post"},H=["value"],q=["value"],R=["value"],z=["value"],$={class:"ui-confirm",id:"confirmDeleteAccount",ref:"confirmDeleteAccount"},Y=["value"],W=["value"],X={class:"accounts"},J=["innerHTML"],Q={key:0,class:"accounterror"},Z=Object(r["createElementVNode"])("span",{class:"icon-warning"},null,-1),ee={key:1},te={key:0,class:"accounterror"},ne=Object(r["createElementVNode"])("span",{class:"icon-warning"},null,-1),ce={key:1},oe={key:0},re={class:"websites-list"},le=Object(r["createElementVNode"])("span",{class:"icon-success"},null,-1),ae={key:1},ie={class:"accounterror"},se=Object(r["createElementVNode"])("span",{class:"icon-warning"},null,-1),de={key:2},ue={class:"websites-list"},be=Object(r["createElementVNode"])("span",{class:"icon-error"},null,-1),me={class:"cta"},Oe=["onSubmit"],je=["value"],pe=["value"],ge={type:"submit",class:"btn"},ye={method:"POST",action:""},fe=Object(r["createElementVNode"])("div",{class:"icon-add logo"},null,-1),Ee=["innerHTML"],he={key:0,class:"accounterror"},Ne=Object(r["createElementVNode"])("br",null,null,-1),Ve=Object(r["createElementVNode"])("span",{class:"icon-warning"},null,-1),Se=["value"],ve={class:"cta"},ke={type:"submit",class:"btn"},Ce=Object(r["createElementVNode"])("div",{class:"clear"},null,-1);function Ae(e,t,n,c,o,l){const a=Object(r["resolveComponent"])("ContentBlock"),i=Object(r["resolveComponent"])("Field"),s=Object(r["resolveDirective"])("content-table");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createVNode"])(a,{"content-title":e.translate("SearchEngineKeywordsPerformance_SearchEngineKeywordsPerformance")},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_BingConfigurationTitle")),1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_BingConfigurationDescription")),1)]),_:1},8,["content-title"]),Object.keys(e.accounts).length>0?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:0,class:Object(r["normalizeClass"])("websiteconfiguration "+(Object.keys(e.configuredMeasurables).length?"configured":""))},[Object(r["createVNode"])(a,{"content-title":e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurables")},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurableBelow")),1),Object(r["createElementVNode"])("div",V,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigRemovalConfirm",e.removeAccountConfigName)),1),Object(r["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,S),Object(r["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,v)],512),Object(r["createElementVNode"])("div",null,[Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("table",k,[Object(r["createElementVNode"])("thead",null,[Object(r["createElementVNode"])("tr",null,[Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("General_Measurable")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("Mobile_Account")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("Goals_URL")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_LastImport")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_CreatedBy")),1),C])]),Object(r["createElementVNode"])("tbody",null,[Object.keys(e.configuredMeasurables).length?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",A,[Object(r["createElementVNode"])("td",w,[Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_NoWebsiteConfigured")),1)])])),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.configuredMeasurablesToDisplay,(t,n,c)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",{key:c,class:Object(r["normalizeClass"])(e.sitesInfos[n].accountValid&&e.sitesInfos[n].urlValid?"":"error")},[Object(r["createElementVNode"])("td",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.sitesInfos[n].name)+" ",1),Object(r["createElementVNode"])("span",null,"("+Object(r["toDisplayString"])(e.sitesInfos[n].main_url)+")",1)]),Object(r["createElementVNode"])("td",null,[e.sitesInfos[n].accountValid?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",B)),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(t.apiKeyDisplay),1)]),Object(r["createElementVNode"])("td",null,[e.sitesInfos[n].urlValid?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",D)),Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.url),1)]),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(e.sitesInfos[n].lastRun),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.createdByUser),1),Object(r["createElementVNode"])("td",null,[Object(r["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(r["withModifiers"])(t=>e.removeAccountConfig(n,t),["prevent"])},[Object(r["createElementVNode"])("input",{type:"hidden",name:"removeConfig",value:n},null,8,T),Object(r["createElementVNode"])("input",{type:"hidden",name:"removeSiteConfigNonce",value:e.removeBingSiteConfigNonce},null,8,P),t.isDeletionAllowed?(Object(r["openBlock"])(),Object(r["createElementBlock"])("button",{key:0,type:"submit",class:"btn-flat icon-delete",title:e.translate("General_Delete")},null,8,K)):Object(r["createCommentVNode"])("",!0)],40,_)])],2))),128)),e.countOfAccountsWithAccess?Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",x,[Object(r["createElementVNode"])("td",U,[Object(r["createElementVNode"])("button",{class:"btn",onClick:t[0]||(t[0]=Object(r["withModifiers"])(t=>e.isAddingMeasurable=!0,["prevent"]))},Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AddConfiguration")),1)])],512)),[[r["vShow"],!e.isAddingMeasurable]]):Object(r["createCommentVNode"])("",!0),e.countOfAccountsWithAccess?Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",M,[Object(r["createElementVNode"])("td",null,[Object(r["createVNode"])(i,{uicontrol:"site",modelValue:e.currentSiteToAdd,"onUpdate:modelValue":t[1]||(t[1]=t=>e.currentSiteToAdd=t),title:e.translate("CoreHome_ChooseX",e.translate("General_Measurable"))},null,8,["modelValue","title"])]),Object(r["createElementVNode"])("td",I,[Object(r["createElementVNode"])("div",L,[Object(r["createVNode"])(i,{uicontrol:"select",modelValue:e.bingAccountAndUrlToAdd,"onUpdate:modelValue":t[2]||(t[2]=t=>e.bingAccountAndUrlToAdd=t),title:e.translate("SearchEngineKeywordsPerformance_UrlOfAccount"),options:e.urlOptions},null,8,["modelValue","title","options"])])]),Object(r["createElementVNode"])("td",F,[Object(r["createElementVNode"])("form",G,[Object(r["createElementVNode"])("input",{type:"hidden",name:"bingSiteId",value:e.currentSiteToAdd.id},null,8,H),Object(r["createElementVNode"])("input",{type:"hidden",name:"addSiteConfigNonce",value:e.addBingSiteConfigNonce},null,8,q),Object(r["createElementVNode"])("input",{type:"hidden",name:"bingAccountAndUrl",value:e.bingAccountAndUrlToAdd},null,8,R),Object(r["createElementVNode"])("input",{type:"submit",class:"btn",value:e.translate("General_Save")},null,8,z)])])],512)),[[r["vShow"],e.isAddingMeasurable]]):Object(r["createCommentVNode"])("",!0)])])),[[s]])])]),_:1},8,["content-title"])],2)):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])("accountconfiguration "+(Object.keys(e.accounts).length>0?"configured":""))},[Object(r["createVNode"])(a,{"content-title":e.translate("SearchEngineKeywordsPerformance_ManageAPIKeys")},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",$,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountRemovalConfirm",e.removeAccountName)),1),Object(r["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,Y),Object(r["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,W)],512),Object(r["createElementVNode"])("div",X,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.accountsToDisplay,t=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:t.username,class:Object(r["normalizeClass"])("account "+(0===Object.keys(t.urls).length||"string"===typeof t.hasError?"invalid":""))},[Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])(`icon-${0===Object.keys(t.urls).length||"string"===typeof t.hasError?"warning":"success"} logo`)},null,2),Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.getDisplayApiKey(t.apiKey)),1),Object(r["createElementVNode"])("p",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_AccountAddedBy",t.username,t.created_formatted))},null,8,J),"string"===typeof t.hasError?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",Q,[Z,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_BingAccountError",t.hasError)),1)])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",ee,[0===Object.keys(t.urls).length?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",te,[ne,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",ce,[Object.values(t.urls).some(e=>e)?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",oe,[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AvailableSites")),1),Object(r["createElementVNode"])("ul",re,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object.entries(t.urls).filter(([,e])=>e),([e],t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{key:t},[le,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e),1)]))),128))])])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",ae,[Object(r["createElementVNode"])("p",ie,[se,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])])),Object.values(t.urls).some(e=>!e)?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",de,[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_UnverifiedSites")),1),Object(r["createElementVNode"])("ul",ue,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object.entries(t.urls).filter(([,e])=>!e),([e],t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{key:t},[be,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e),1)]))),128))])])):Object(r["createCommentVNode"])("",!0)]))])),Object(r["createElementVNode"])("div",me,[Object(r["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(r["withModifiers"])(n=>e.removeAccount(t,n),["prevent"])},[Object(r["createElementVNode"])("input",{type:"hidden",name:"remove",value:t.apiKey},null,8,je),Object(r["createElementVNode"])("input",{type:"hidden",name:"removeAccountNonce",value:e.removeBingAccountNonce},null,8,pe),Object(r["createElementVNode"])("button",ge,Object(r["toDisplayString"])(e.translate("General_Remove")),1)],40,Oe)])],2))),128)),Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])("account add "+(e.hasApiKeyError?"invalid":""))},[Object(r["createElementVNode"])("form",ye,[fe,Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AddAPIKey")),1),Object(r["createElementVNode"])("span",{innerHTML:e.$sanitize(e.bingApiKeyInstructionText)},null,8,Ee),e.hasApiKeyError?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",he,[Ne,Ve,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_BingAccountError",e.error)),1)])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(i,{uicontrol:"text","full-width":!0,name:"apikey",modelValue:e.apiKeyToAdd,"onUpdate:modelValue":t[3]||(t[3]=t=>e.apiKeyToAdd=t),title:e.translate("SearchEngineKeywordsPerformance_APIKey"),autocomplete:"off"},null,8,["modelValue","title"]),Object(r["createElementVNode"])("input",{type:"hidden",name:"config_nonce",value:e.formNonce},null,8,Se),Object(r["createElementVNode"])("div",ve,[Object(r["createElementVNode"])("button",ke,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AddAPIKey")),1)])])],2),Ce])]),_:1},8,["content-title"])],2)])}var we=n("a5a2");
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */function Be(e=""){return`${e.substr(0,5)}*****${e.substr(e.length-5,5)}`}var De=Object(r["defineComponent"])({props:{configuredMeasurables:{type:Object,required:!0},accounts:{type:Object,required:!0},sitesInfos:{type:Object,required:!0},currentSite:{type:Object,required:!0},urlOptions:{type:[Object,Array],required:!0},error:String,apikey:String,formNonce:String,addBingSiteConfigNonce:String,removeBingSiteConfigNonce:String,removeBingAccountNonce:String,countOfAccountsWithAccess:Number,userIsSuperUser:String},data(){return{removeAccountConfigName:"",removeAccountName:"",isAddingMeasurable:!1,currentSiteToAdd:this.currentSite,bingAccountAndUrlToAdd:null,apiKeyToAdd:this.apikey||""}},components:{ContentBlock:s["ContentBlock"],Field:we["Field"]},directives:{ContentTable:s["ContentTable"]},methods:{removeAccountConfig(e,t){const n=this.sitesInfos;this.removeAccountConfigName=n[e].name,s["Matomo"].helper.modalConfirm(this.$refs.confirmRemoveAccountConfig,{yes(){t.target.submit()}})},getDisplayApiKey:Be,removeAccount(e,t){this.removeAccountName=this.getDisplayApiKey(e.apiKey),s["Matomo"].helper.modalConfirm(this.$refs.confirmDeleteAccount,{yes(){t.target.submit()}})}},computed:{hasApiKeyError(){return"undefined"!==typeof this.error&&null!==this.error},configuredMeasurablesToDisplay(){const e=Object.entries(this.configuredMeasurables);return Object.fromEntries(e.filter(([,e])=>{const[t]=e.bingSiteUrl.split("##");return!!this.accounts[t]}).map(([e,t])=>{const[n,c]=t.bingSiteUrl.split("##"),{apiKey:o}=this.accounts[n];return[e,Object.assign(Object.assign({},t),{},{account:n,url:c,apiKeyDisplay:this.getDisplayApiKey(o)})]}))},bingApiKeyInstructionText(){const e=Object(s["externalRawLink"])("https://matomo.org/faq/reports/import-bing-and-yahoo-search-keywords-into-matomo/");return Object(s["translate"])("SearchEngineKeywordsPerformance_BingAPIKeyInstruction",'<a href="https://www.bing.com/webmasters" target="_new" rel="noreferrer noopener">',"</a>",`<a href="${e}" target="_blank" rel="noreferrer noopener">`,"</a>")},accountsToDisplay(){const e=Object.entries(this.accounts),t=e.filter(([,e])=>e.hasAccess);return Object.fromEntries(t)}}});De.render=Ae;var _e=De;const Te={key:0},Pe={class:"alert alert-warning"},Ke={key:1},xe={class:"ui-confirm",id:"confirmRemoveAccountConfig",ref:"confirmRemoveAccountConfig"},Ue=["value"],Me=["value"],Ie={class:"measurableList"},Le=Object(r["createElementVNode"])("th",null,null,-1),Fe={key:0},Ge={colspan:"7"},He=["innerHTML"],qe={key:0,class:"icon-error"},Re={key:0,class:"icon-error"},ze=Object(r["createElementVNode"])("br",null,null,-1),$e=["title"],Ye=Object(r["createElementVNode"])("span",{class:"icon-info"},null,-1),We=["title"],Xe=Object(r["createElementVNode"])("span",{class:"icon-info"},null,-1),Je=["onSubmit"],Qe=["value"],Ze=["value"],et=["title"],tt={key:1,class:"configureMeasurableForm"},nt={class:"account-select"},ct={colspan:"4"},ot={action:"",method:"post"},rt=["value"],lt=["value"],at=["value"],it=["value"],st=["value"],dt={key:0},ut={key:2,class:"oauthconfiguration"},bt={class:"section-heading"},mt={class:"ui-confirm",id:"confirmDeleteAccount",ref:"confirmDeleteAccount"},Ot=["value"],jt=["value"],pt={class:"oauthconfigoptions"},gt={key:0},yt={key:1},ft={key:2},Et={key:0},ht=Object(r["createElementVNode"])("br",null,null,-1),Nt={class:"accounts"},Vt={class:"logo"},St=["src"],vt=["innerHTML"],kt={key:0},Ct={class:"accounterror"},At=Object(r["createElementVNode"])("span",{class:"icon-warning"},null,-1),wt={key:1},Bt={key:0},Dt={class:"accounterror"},_t=Object(r["createElementVNode"])("span",{class:"icon-warning"},null,-1),Tt={key:1},Pt={key:0},Kt={class:"websites-list"},xt=Object(r["createElementVNode"])("span",{class:"icon-success"},null,-1),Ut={key:1,class:"accounterror"},Mt=Object(r["createElementVNode"])("span",{class:"icon-warning"},null,-1),It={key:2},Lt={class:"websites-list"},Ft=Object(r["createElementVNode"])("span",{class:"icon-error"},null,-1),Gt={class:"cta"},Ht=["onSubmit"],qt=["value"],Rt=["value"],zt={type:"submit",class:"btn"},$t={class:"account add"},Yt=Object(r["createElementVNode"])("div",{class:"icon-add logo"},null,-1),Wt=["innerHTML"],Xt=["innerHTML"],Jt=["innerHTML"],Qt={class:"cta"},Zt=["action"],en=["value"],tn={type:"submit",class:"btn"},nn=Object(r["createElementVNode"])("div",{class:"clear"},null,-1),cn={key:3,class:"clientconfiguration"},on={class:"section-heading"},rn=Object(r["createElementVNode"])("br",null,null,-1),ln=["action"],an=["value"],sn={type:"submit",class:"btn"},dn={key:4};function un(e,t,n,c,o,l){const a=Object(r["resolveComponent"])("Field"),i=Object(r["resolveComponent"])("Notification"),s=Object(r["resolveComponent"])("ContentBlock"),d=Object(r["resolveDirective"])("content-table");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createVNode"])(s,{"content-title":e.translate("SearchEngineKeywordsPerformance_SearchEngineKeywordsPerformance")},{default:Object(r["withCtx"])(()=>[e.isClientConfigured||!e.isClientConfigurable||e.userIsSuperUser?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Te,[Object(r["createElementVNode"])("div",Pe,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_GooglePendingConfigurationErrorMessage")),1)])),e.isClientConfigured&&e.isOAuthConfigured?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Ke,[Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurables")),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurableBelow")),1),Object(r["createElementVNode"])("div",xe,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigRemovalConfirm",e.removeAccountConfigName)),1),Object(r["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,Ue),Object(r["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,Me)],512),Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("table",Ie,[Object(r["createElementVNode"])("thead",null,[Object(r["createElementVNode"])("tr",null,[Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("General_Measurable")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_EnabledSearchTypes")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("Mobile_Account")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("Goals_URL")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_LastImport")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_CreatedBy")),1),Le])]),Object(r["createElementVNode"])("tbody",null,[0===Object.keys(e.configuredMeasurablesToDisplay).length?(Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",Fe,[Object(r["createElementVNode"])("td",Ge,[Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_NoWebsiteConfigured")),1)])])):Object(r["createCommentVNode"])("",!0),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.configuredMeasurablesToDisplay,(t,n,c)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",{key:c,class:Object(r["normalizeClass"])(e.sitesInfos[n].accountValid&&e.sitesInfos[n].urlValid?"":"error")},[Object(r["createElementVNode"])("td",{innerHTML:e.$sanitize(e.sitesInfos[n].name)},null,8,He),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.googleWebKeywords?e.translate("SearchEngineKeywordsPerformance_KeywordTypeWeb"):"")+" "+Object(r["toDisplayString"])(t.googleImageKeywords?e.translate("SearchEngineKeywordsPerformance_KeywordTypeImage"):"")+" "+Object(r["toDisplayString"])(t.googleVideoKeywords?e.translate("SearchEngineKeywordsPerformance_KeywordTypeVideo"):"")+" "+Object(r["toDisplayString"])(t.googleNewsKeywords?e.translate("SearchEngineKeywordsPerformance_KeywordTypeNews"):""),1),Object(r["createElementVNode"])("td",null,[e.sitesInfos[n].accountValid?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",qe)),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.accounts[t.account].name),1)]),Object(r["createElementVNode"])("td",null,[e.sitesInfos[n].urlValid?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",Re)),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(t.url.replaceAll("sc-domain:",""))+" ",1),ze,/^sc-domain:/.test(t.url)?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",{key:1,class:"property-type",title:e.translate("SearchEngineKeywordsPerformance_DomainPropertyInfo")},[Ye,Object(r["createTextVNode"])(" ("+Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_DomainProperty"))+") ",1)],8,$e)):/^http/.test(t.url)?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",{key:2,class:"property-type",title:e.translate("SearchEngineKeywordsPerformance_URLPrefixPropertyInfo")},[Xe,Object(r["createTextVNode"])(" ("+Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_URLPrefixProperty"))+") ",1)],8,We)):Object(r["createCommentVNode"])("",!0)]),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(e.sitesInfos[n].lastRun),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.createdByUser),1),Object(r["createElementVNode"])("td",null,[Object(r["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(r["withModifiers"])(t=>e.removeAccountConfig(n,t),["prevent"])},[Object(r["createElementVNode"])("input",{type:"hidden",name:"removeConfig",value:n},null,8,Qe),Object(r["createElementVNode"])("input",{type:"hidden",name:"removeSiteConfigNonce",value:e.removeGoogleSiteConfigNonce},null,8,Ze),t.isDeletionAllowed?(Object(r["openBlock"])(),Object(r["createElementBlock"])("button",{key:0,type:"submit",class:"btn-flat icon-delete",title:e.translate("General_Delete")},null,8,et)):Object(r["createCommentVNode"])("",!0)],40,Je)])],2))),128)),e.countOfAccountsWithAccess?Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",tt,[Object(r["createElementVNode"])("td",null,[Object(r["createVNode"])(a,{uicontrol:"site","full-width":!0,modelValue:e.currentSiteToAdd,"onUpdate:modelValue":t[0]||(t[0]=t=>e.currentSiteToAdd=t),title:e.translate("CoreHome_ChooseX",e.translate("General_Measurable"))},null,8,["modelValue","title"])]),Object(r["createElementVNode"])("td",null,[Object(r["createVNode"])(a,{uicontrol:"checkbox",modelValue:e.googleTypesToAdd,"onUpdate:modelValue":t[1]||(t[1]=t=>e.googleTypesToAdd=t),"var-type":"array",title:"keyword types to fetch","full-width":!0,options:e.googleTypeOptions},null,8,["modelValue","options"])]),Object(r["createElementVNode"])("td",null,[Object(r["createElementVNode"])("div",nt,[Object(r["createVNode"])(a,{uicontrol:"select",modelValue:e.googleAccountAndUrlToAdd,"onUpdate:modelValue":t[2]||(t[2]=t=>e.googleAccountAndUrlToAdd=t),title:e.translate("SearchEngineKeywordsPerformance_UrlOfAccount"),"full-width":!0,options:e.urlOptions},null,8,["modelValue","title","options"])])]),Object(r["createElementVNode"])("td",ct,[Object(r["createElementVNode"])("form",ot,[Object(r["createElementVNode"])("input",{type:"hidden",name:"googleSiteId",value:e.currentSiteToAdd.id},null,8,rt),Object(r["createElementVNode"])("input",{type:"hidden",name:"addSiteConfigNonce",value:e.addGoogleSiteConfigNonce},null,8,lt),Object(r["createElementVNode"])("input",{type:"hidden",name:"googleAccountAndUrl",value:e.googleAccountAndUrlToAdd},null,8,at),Object(r["createElementVNode"])("input",{type:"hidden",name:"googleTypes",value:e.googleTypesToAdd.length?e.googleTypesToAdd:"web"},null,8,it),Object(r["createElementVNode"])("input",{type:"submit",class:"btn",value:e.translate("General_Save")},null,8,st)])])],512)),[[r["vShow"],e.isAddingMeasurable]]):Object(r["createCommentVNode"])("",!0)])])),[[d]]),e.countOfAccountsWithAccess?Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("div",dt,[Object(r["createElementVNode"])("button",{id:"addWebsiteBtn",class:"btn",onClick:t[3]||(t[3]=t=>e.isAddingMeasurable=!0)},Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AddConfiguration")),1)],512)),[[r["vShow"],!e.isAddingMeasurable]]):Object(r["createCommentVNode"])("",!0)])):Object(r["createCommentVNode"])("",!0),e.isClientConfigured?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",ut,[Object(r["createElementVNode"])("h3",bt,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectGoogleAccounts")),1),Object(r["createElementVNode"])("div",mt,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountRemovalConfirm",e.removeAccountName)),1),Object(r["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,Ot),Object(r["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,jt)],512),Object(r["createElementVNode"])("div",pt,[e.isOAuthConfigured?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",gt,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_CurrentlyConnectedAccounts",e.countOfAccountsWithAccess)),1)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",yt,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectFirstAccount")),1)),e.hasOAuthError?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",ft,[Object(r["createVNode"])(i,{context:"error",type:"transient"},{default:Object(r["withCtx"])(()=>[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthError"))+" ",1),e.hasOAuthError.length>5?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",Et,[ht,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.hasOAuthError),1)])):Object(r["createCommentVNode"])("",!0)]),_:1})])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",Nt,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.accountsToDisplay,(t,n)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:n,class:"account"},[Object(r["createElementVNode"])("div",Vt,[Object(r["createElementVNode"])("img",{src:t.picture},null,8,St)]),Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(t.name),1),Object(r["createElementVNode"])("p",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_AccountAddedBy",t.username,t.created_formatted))},null,8,vt),"string"===typeof t.hasError?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",kt,[Object(r["createElementVNode"])("p",Ct,[At,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountConnectionValidationError"))+" "+Object(r["toDisplayString"])(t.hasError),1)]),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ReAddAccountIfPermanentError")),1)])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",wt,[0===Object.keys(t.urls).length?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Bt,[Object(r["createElementVNode"])("p",Dt,[_t,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Tt,[e.accountHasAvailableSites(t)?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Pt,[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AvailableSites")),1),Object(r["createElementVNode"])("ul",Kt,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object.entries(t.urls).filter(([,e])=>"siteUnverifiedUser"!==e),([e],t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{key:t},[xt,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.replaceAll("sc-domain:","")),1)]))),128))])])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",Ut,[Mt,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])),-1!==Object.values(t.urls).indexOf("siteUnverifiedUser")?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",It,[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_UnverifiedSites")),1),Object(r["createElementVNode"])("ul",Lt,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object.entries(t.urls).filter(([,e])=>"siteUnverifiedUser"===e),([e],t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{key:t},[Ft,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.replaceAll("sc-domain:","")),1)]))),128))])])):Object(r["createCommentVNode"])("",!0)]))])),Object(r["createElementVNode"])("div",Gt,[Object(r["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(r["withModifiers"])(n=>e.removeAccount(t,n),["prevent"])},[Object(r["createElementVNode"])("input",{type:"hidden",name:"remove",value:n},null,8,qt),Object(r["createElementVNode"])("input",{type:"hidden",name:"removeAccountNonce",value:e.removeGoogleAccountNonce},null,8,Rt),Object(r["createElementVNode"])("button",zt,Object(r["toDisplayString"])(e.translate("General_Remove")),1)],40,Ht)])]))),128)),Object(r["createElementVNode"])("div",$t,[Yt,Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectAccount")),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectAccountDescription","Google")),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_RequiredAccessTypes")),1),Object(r["createElementVNode"])("ul",null,[Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_GoogleAccountAccessTypeSearchConsoleData"))},null,8,Wt),Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_GoogleAccountAccessTypeProfileInfo"))},null,8,Xt),Object(r["createElementVNode"])("li",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_GoogleAccountAccessTypeOfflineAccess"))},null,8,Jt)]),Object(r["createElementVNode"])("div",Qt,[Object(r["createElementVNode"])("form",{method:"post",action:e.forwardToAuthUrl,id:"clientauthform"},[Object(r["createElementVNode"])("input",{type:"hidden",name:"auth_nonce",value:e.authNonce},null,8,en),Object(r["createElementVNode"])("button",tn,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_StartOAuth")),1)],8,Zt)])]),nn])])])):Object(r["createCommentVNode"])("",!0),e.isClientConfigurable&&e.isClientConfigured&&e.userIsSuperUser?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",cn,[Object(r["createElementVNode"])("h3",on,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthClientConfig")),1),Object(r["createElementVNode"])("p",null,[Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ClientId"))+":",1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.clientId),1)]),Object(r["createElementVNode"])("p",null,[Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ClientSecret"))+":",1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.clientSecret),1)]),rn,Object(r["createElementVNode"])("form",{action:e.removeConfigUrl,method:"POST",enctype:"multipart/form-data",id:"removeConfigForm"},[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_DeleteUploadedClientConfig"))+":",1),Object(r["createElementVNode"])("input",{type:"hidden",name:"config_nonce",value:e.formNonce},null,8,an),Object(r["createElementVNode"])("button",sn,Object(r["toDisplayString"])(e.translate("General_Remove")),1)],8,ln)])):Object(r["createCommentVNode"])("",!0),e.userIsSuperUser?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",dn,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.componentExtensions,(t,n)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:n},[(Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(t),{"manual-config-nonce":e.configConnectProps.manualConfigNonce,"base-domain":e.configConnectProps.baseDomain,"base-url":e.configConnectProps.baseUrl,"manual-action-url":e.configConnectProps.manualActionUrl,"primary-text":e.configConnectProps.primaryText,"radio-options":e.configConnectProps.radioOptions,"manual-config-text":e.configConnectProps.manualConfigText,"connect-accounts-url":e.configConnectProps.connectAccountsUrl,"connect-accounts-btn-text":e.configConnectProps.connectAccountsBtnText,"auth-url":e.configConnectProps.authUrl,"unlink-url":e.configConnectProps.unlinkUrl,strategy:e.configConnectProps.strategy,"connected-with":e.configConnectProps.connectedWith},null,8,["manual-config-nonce","base-domain","base-url","manual-action-url","primary-text","radio-options","manual-config-text","connect-accounts-url","connect-accounts-btn-text","auth-url","unlink-url","strategy","connected-with"]))]))),128))])):Object(r["createCommentVNode"])("",!0)]),_:1},8,["content-title"])])}var bn=Object(r["defineComponent"])({props:{configuredMeasurables:{type:Object,required:!0},isClientConfigured:Boolean,isClientConfigurable:Boolean,isOAuthConfigured:Boolean,clientId:String,clientSecret:String,accounts:{type:Object,required:!0},sitesInfos:{type:Object,required:!0},currentSite:{type:Object,required:!0},urlOptions:{type:[Object,Array],required:!0},hasOAuthError:[String,Boolean],authNonce:{type:String,required:!0},formNonce:String,addGoogleSiteConfigNonce:String,removeGoogleSiteConfigNonce:String,removeGoogleAccountNonce:String,countOfAccountsWithAccess:Number,userIsSuperUser:String,extensions:Array,removeConfigUrl:String,configureConnectionProps:{type:Object,required:!0}},components:{ContentBlock:s["ContentBlock"],Field:we["Field"],Notification:s["Notification"]},directives:{ContentTable:s["ContentTable"]},data(){return{removeAccountConfigName:"",removeAccountName:"",isAddingMeasurable:!1,currentSiteToAdd:this.currentSite,googleAccountAndUrlToAdd:null,googleTypesToAdd:["web"],clientFile:null,clientText:""}},methods:{removeAccountConfig(e,t){const n=this.sitesInfos;this.removeAccountConfigName=n[e].name,s["Matomo"].helper.modalConfirm(this.$refs.confirmRemoveAccountConfig,{yes(){t.target.submit()}})},removeAccount(e,t){this.removeAccountName=e.name,s["Matomo"].helper.modalConfirm(this.$refs.confirmDeleteAccount,{yes(){t.target.submit()}})},accountHasAvailableSites(e){const t=["siteOwner","siteFullUser","siteRestrictedUser"];return Object.values(e.urls).some(e=>-1!==t.indexOf(e))}},computed:{configuredMeasurablesToDisplay(){const e=Object.entries(this.configuredMeasurables);return Object.fromEntries(e.filter(([,e])=>{const[t]=e.googleSearchConsoleUrl.split("##");return!!this.accounts[t]}).map(([e,t])=>{const[n,c]=t.googleSearchConsoleUrl.split("##"),{apiKey:o}=this.accounts[n];return[e,Object.assign(Object.assign({},t),{},{account:n,url:c,apiKeyDisplay:Be(o)})]}))},accountsToDisplay(){const e=Object.entries(this.accounts),t=e.filter(([,e])=>e.hasAccess);return Object.fromEntries(t)},googleTypeOptions(){return{web:Object(s["translate"])("SearchEngineKeywordsPerformance_KeywordTypeWeb"),image:Object(s["translate"])("SearchEngineKeywordsPerformance_KeywordTypeImage"),video:Object(s["translate"])("SearchEngineKeywordsPerformance_KeywordTypeVideo"),news:Object(s["translate"])("SearchEngineKeywordsPerformance_KeywordTypeNews")}},forwardToAuthUrl(){return"?"+s["MatomoUrl"].stringify(Object.assign(Object.assign({},s["MatomoUrl"].urlParsed.value),{},{action:"forwardToAuth"}))},visitOAuthHowTo(){const e=Object(s["externalRawLink"])("https://matomo.org/faq/reports/import-google-search-keywords-in-matomo/#how-to-set-up-google-oauth-client-config");return Object(s["translate"])("SearchEngineKeywordsPerformance_VisitOAuthHowTo",`<a target="_blank" href="${e}" rel="noreferrer noopener">`,"</a>","Google")},componentExtensions(){const e=this.extensions;return Object(r["markRaw"])(e.map(e=>Object(s["useExternalPluginComponent"])(e.plugin,e.component)))},configConnectProps(){return this.configureConnectionProps}}});bn.render=un;var mn=bn;const On={class:"ui-confirm",id:"confirmRemoveAccountConfig",ref:"confirmRemoveAccountConfig"},jn=["value"],pn=["value"],gn={class:"measurableList"},yn=Object(r["createElementVNode"])("th",null,null,-1),fn=["innerHTML"],En={key:0,class:"icon-error"},hn={key:0,class:"icon-error"},Nn=["onSubmit"],Vn=["value"],Sn=["value"],vn=["title"],kn={key:0},Cn={colspan:"6",align:"right"},An={key:1,class:"configureMeasurableForm"},wn={colspan:"2"},Bn={class:"account-select"},Dn={colspan:"3"},_n={action:"",method:"post"},Tn=["value"],Pn=["value"],Kn=["value"],xn=["value"],Un={class:"ui-confirm",id:"confirmDeleteAccount",ref:"confirmDeleteAccount"},Mn=["value"],In=["value"],Ln={class:"oauthconfigoptions"},Fn={key:0},Gn={key:1},Hn={key:2},qn={key:0},Rn=Object(r["createElementVNode"])("br",null,null,-1),zn={class:"accounts"},$n={class:"logo"},Yn=["src"],Wn=["innerHTML"],Xn={key:0},Jn={class:"accounterror"},Qn=Object(r["createElementVNode"])("span",{class:"icon-warning"},null,-1),Zn={key:1},ec={key:0,class:"accounterror"},tc=Object(r["createElementVNode"])("span",{class:"icon-warning"},null,-1),nc={key:1},cc={key:0},oc={class:"websites-list"},rc=Object(r["createElementVNode"])("span",{class:"icon-success"},null,-1),lc={key:1,class:"accounterror"},ac=Object(r["createElementVNode"])("span",{class:"icon-warning"},null,-1),ic={key:2},sc={class:"websites-list"},dc=Object(r["createElementVNode"])("span",{class:"icon-error"},null,-1),uc={key:2,class:"accounterror"},bc=Object(r["createElementVNode"])("span",{class:"icon-warning"},null,-1),mc={key:3,class:"accounterror"},Oc=Object(r["createElementVNode"])("span",{class:"icon-warning"},null,-1),jc=["innerHTML"],pc=["innerHTML"],gc={class:"cta"},yc=["action"],fc=["value"],Ec={type:"submit",class:"btn"},hc=["onSubmit"],Nc=["value"],Vc=["value"],Sc={type:"submit",class:"btn"},vc={class:"account add"},kc=Object(r["createElementVNode"])("div",{class:"icon-add logo"},null,-1),Cc={class:"cta"},Ac=["action"],wc=["value"],Bc={type:"submit",class:"btn"},Dc=Object(r["createElementVNode"])("div",{class:"clear"},null,-1),_c={key:3,class:"clientconfighelp"},Tc=["innerHTML"],Pc=Object(r["createElementVNode"])("br",null,null,-1),Kc=Object(r["createElementVNode"])("br",null,null,-1),xc={method:"post",action:"",id:"clientconfigform"},Uc=["value"],Mc={type:"submit",class:"btn"};function Ic(e,t,n,c,o,l){const a=Object(r["resolveComponent"])("ContentBlock"),i=Object(r["resolveComponent"])("Field"),s=Object(r["resolveComponent"])("Notification"),d=Object(r["resolveDirective"])("content-table");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createVNode"])(a,{"content-title":e.translate("SearchEngineKeywordsPerformance_SearchEngineKeywordsPerformance")},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_YandexConfigurationTitle")),1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_YandexConfigurationDescription")),1)]),_:1},8,["content-title"]),e.isClientConfigured&&e.isOAuthConfigured?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:0,class:Object(r["normalizeClass"])(Object.keys(e.configuredMeasurables).length?"configured":"")},[Object(r["createVNode"])(a,{"content-title":e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurables")},{default:Object(r["withCtx"])(()=>{var n;return[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurableBelow")),1),Object(r["createElementVNode"])("div",On,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigRemovalConfirm",e.removeAccountConfigName)),1),Object(r["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,jn),Object(r["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,pn)],512),Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("table",gn,[Object(r["createElementVNode"])("thead",null,[Object(r["createElementVNode"])("tr",null,[Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("General_Measurable")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("Mobile_Account")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("Goals_URL")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_LastImport")),1),Object(r["createElementVNode"])("th",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_CreatedBy")),1),yn])]),Object(r["createElementVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.configuredMeasurablesToDisplay,(t,n,c)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",{key:c,class:Object(r["normalizeClass"])(e.sitesInfos[n].accountValid&&e.sitesInfos[n].urlValid?"":"error")},[Object(r["createElementVNode"])("td",{innerHTML:e.$sanitize(e.sitesInfos[n].name)},null,8,fn),Object(r["createElementVNode"])("td",null,[e.sitesInfos[n].accountValid?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",En)),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.accounts[t.account].name),1)]),Object(r["createElementVNode"])("td",null,[e.sitesInfos[n].urlValid?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",hn)),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(t.hostUrl||t.host),1)]),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(e.sitesInfos[n].lastRun),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(t.createdByUser),1),Object(r["createElementVNode"])("td",null,[Object(r["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(r["withModifiers"])(t=>e.removeAccountConfig(n,t),["prevent"])},[Object(r["createElementVNode"])("input",{type:"hidden",name:"removeConfig",value:n},null,8,Vn),Object(r["createElementVNode"])("input",{type:"hidden",name:"removeSiteConfigNonce",value:e.removeYandexSiteConfigNonce},null,8,Sn),t.isDeletionAllowed?(Object(r["openBlock"])(),Object(r["createElementBlock"])("button",{key:0,type:"submit",class:"btn-flat icon-delete",title:e.translate("General_Delete")},null,8,vn)):Object(r["createCommentVNode"])("",!0)],40,Nn)])],2))),128)),e.countOfAccountsWithAccess?Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",kn,[Object(r["createElementVNode"])("td",Cn,[Object(r["createElementVNode"])("button",{class:"btn",onClick:t[0]||(t[0]=t=>e.isAddingMeasurable=!0)},Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AddConfiguration")),1)])],512)),[[r["vShow"],!e.isAddingMeasurable]]):Object(r["createCommentVNode"])("",!0),e.countOfAccountsWithAccess?Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",An,[Object(r["createElementVNode"])("td",null,[Object(r["createVNode"])(i,{uicontrol:"site","full-width":!0,modelValue:e.currentSiteToAdd,"onUpdate:modelValue":t[1]||(t[1]=t=>e.currentSiteToAdd=t),title:e.translate("CoreHome_ChooseX",e.translate("General_Measurable"))},null,8,["modelValue","title"])]),Object(r["createElementVNode"])("td",wn,[Object(r["createElementVNode"])("div",Bn,[Object(r["createVNode"])(i,{uicontrol:"select",modelValue:e.yandexAccountAndHostIdToAdd,"onUpdate:modelValue":t[2]||(t[2]=t=>e.yandexAccountAndHostIdToAdd=t),title:e.translate("SearchEngineKeywordsPerformance_UrlOfAccount"),"full-width":!0,options:e.urlOptions},null,8,["modelValue","title","options"])])]),Object(r["createElementVNode"])("td",Dn,[Object(r["createElementVNode"])("form",_n,[Object(r["createElementVNode"])("input",{type:"hidden",name:"yandexSiteId",value:null===(n=e.currentSiteToAdd)||void 0===n?void 0:n.id},null,8,Tn),Object(r["createElementVNode"])("input",{type:"hidden",name:"addSiteConfigNonce",value:e.addYandexSiteConfigNonce},null,8,Pn),Object(r["createElementVNode"])("input",{type:"hidden",name:"yandexAccountAndHostId",value:e.yandexAccountAndHostIdToAdd},null,8,Kn),Object(r["createElementVNode"])("input",{type:"submit",class:"btn",value:e.translate("General_Save")},null,8,xn)])])],512)),[[r["vShow"],e.isAddingMeasurable]]):Object(r["createCommentVNode"])("",!0)])])),[[d]])]}),_:1},8,["content-title"])],2)):Object(r["createCommentVNode"])("",!0),e.isClientConfigured?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:1,class:Object(r["normalizeClass"])(`oauthconfiguration ${e.isOAuthConfigured?"configured":""} yandex`)},[Object(r["createVNode"])(a,{"content-title":e.translate("SearchEngineKeywordsPerformance_ConnectYandexAccounts")},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",Un,[Object(r["createElementVNode"])("h2",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountRemovalConfirm",e.removeAccountName)),1),Object(r["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,Mn),Object(r["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,In)],512),Object(r["createElementVNode"])("div",Ln,[e.isOAuthConfigured?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",Fn,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_CurrentlyConnectedAccounts",e.countOfAccountsWithAccess)),1)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",Gn,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectFirstAccount")),1)),e.hasOAuthError?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",Hn,[Object(r["createVNode"])(s,{context:"error"},{default:Object(r["withCtx"])(()=>[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthError"))+" ",1),"string"===typeof e.hasOAuthError?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",qn,[Rn,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.hasOAuthError),1)])):Object(r["createCommentVNode"])("",!0)]),_:1})])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",zn,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.accountsToDisplay,(t,n)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:n,class:Object(r["normalizeClass"])("account "+(0===Object.keys(t.urls).length||"string"===typeof t.hasError?"invalid":""))},[Object(r["createElementVNode"])("div",$n,[Object(r["createElementVNode"])("img",{src:t.picture},null,8,Yn)]),Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(t.name),1),Object(r["createElementVNode"])("p",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_AccountAddedBy",t.username,t.created_formatted))},null,8,Wn),"string"===typeof t.hasError?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Xn,[Object(r["createElementVNode"])("p",Jn,[Qn,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountConnectionValidationError"))+" "+Object(r["toDisplayString"])(t.hasError),1)]),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ReAuthenticateIfPermanentError")),1)])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Zn,[0===Object.keys(t.urls).length?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",ec,[tc,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",nc,[Object.values(t.urls).some(e=>e.verified)?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",cc,[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AvailableSites")),1),Object(r["createElementVNode"])("ul",oc,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object.entries(t.urls).filter(([,e])=>e.verified),([e],t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{key:t},[rc,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e),1)]))),128))])])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",lc,[ac,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])),Object.values(t.urls).some(e=>!e.verified)?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",ic,[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_UnverifiedSites")),1),Object(r["createElementVNode"])("ul",sc,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object.entries(t.urls).filter(([,e])=>!e.verified),([e],t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{key:t},[dc,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e),1)]))),128))])])):Object(r["createCommentVNode"])("",!0)]))])),t.authDaysAgo>=180?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",uc,[bc,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthAccessTimedOut")),1)])):t.authDaysAgo>=150?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",mc,[Oc,Object(r["createElementVNode"])("span",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_OAuthAccessWillTimeOutSoon",180-t.authDaysAgo))},null,8,jc)])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",{key:4,innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_OAuthAccessWillTimeOut",180,180-t.authDaysAgo))},null,8,pc)),Object(r["createElementVNode"])("div",gc,[Object(r["createElementVNode"])("form",{method:"post",action:e.forwardToYandexAuthUrl},[Object(r["createElementVNode"])("input",{type:"hidden",name:"auth_nonce",value:e.auth_nonce},null,8,fc),Object(r["createElementVNode"])("button",Ec,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_Reauthenticate")),1)],8,yc),Object(r["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(r["withModifiers"])(n=>e.removeAccount(t,n),["prevent"])},[Object(r["createElementVNode"])("input",{type:"hidden",name:"remove",value:n},null,8,Nc),Object(r["createElementVNode"])("input",{type:"hidden",name:"removeAccountNonce",value:e.removeYandexAccountNonce},null,8,Vc),Object(r["createElementVNode"])("button",Sc,Object(r["toDisplayString"])(e.translate("General_Remove")),1)],40,hc)])],2))),128)),Object(r["createElementVNode"])("div",vc,[kc,Object(r["createElementVNode"])("h3",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectAccount")),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectAccountDescription","Yandex")),1),Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectAccountYandex","180")),1),Object(r["createElementVNode"])("div",Cc,[Object(r["createElementVNode"])("form",{method:"post",action:e.forwardToYandexAuthUrl,id:"clientauthform"},[Object(r["createElementVNode"])("input",{type:"hidden",name:"auth_nonce",value:e.auth_nonce},null,8,wc),Object(r["createElementVNode"])("button",Bc,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_StartOAuth")),1)],8,Ac)])]),Dc])])]),_:1},8,["content-title"])],2)):Object(r["createCommentVNode"])("",!0),e.isClientConfigured&&e.userIsSuperUser?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:2,class:Object(r["normalizeClass"])("clientconfiguration "+(e.isClientConfigured?"configured":""))},[Object(r["createVNode"])(a,{"content-title":e.translate("SearchEngineKeywordsPerformance_OAuthClientConfig")},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("p",null,[Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ClientId"))+":",1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.clientId),1)]),Object(r["createElementVNode"])("p",null,[Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ClientSecret"))+":",1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.clientSecret),1)])]),_:1},8,["content-title"])],2)):Object(r["createCommentVNode"])("",!0),e.userIsSuperUser?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",_c,[Object(r["createVNode"])(a,{"content-title":e.translate("SearchEngineKeywordsPerformance_HowToGetOAuthClientConfig")},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("p",{innerHTML:e.visitOAuthHowTo},null,8,Tc),Object(r["createElementVNode"])("p",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthExampleText"))+" ",1),Pc,Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_YandexFieldUrlToAppSite"))+":",1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.baseDomain)+" ",1),Kc,Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_YandexFieldCallbackUri"))+":",1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.baseDomainUrl)+"?module=SearchEngineKeywordsPerformance&action=processYandexAuthCode ",1)])]),_:1},8,["content-title"])])):Object(r["createCommentVNode"])("",!0),e.userIsSuperUser?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:4,class:Object(r["normalizeClass"])(e.isClientConfigured?"":"clientconfiguration")},[Object(r["createVNode"])(a,{"content-title":e.translate("SearchEngineKeywordsPerformance_SetUpOAuthClientConfig")},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("form",xc,[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ProvideYandexClientConfig")),1),Object(r["createVNode"])(i,{uicontrol:"text",name:"clientid",modelValue:e.clientIdToUse,"onUpdate:modelValue":t[3]||(t[3]=t=>e.clientIdToUse=t),title:e.translate("SearchEngineKeywordsPerformance_ClientId"),autocomplete:"off"},null,8,["modelValue","title"]),Object(r["createVNode"])(i,{uicontrol:"text",name:"clientsecret",modelValue:e.clientSecretToUse,"onUpdate:modelValue":t[4]||(t[4]=t=>e.clientSecretToUse=t),title:e.translate("SearchEngineKeywordsPerformance_ClientSecret"),autocomplete:"off"},null,8,["modelValue","title"]),Object(r["createElementVNode"])("input",{type:"hidden",name:"config_nonce",value:e.formNonce},null,8,Uc),Object(r["createElementVNode"])("button",Mc,Object(r["toDisplayString"])(e.translate("General_Save")),1)])]),_:1},8,["content-title"])],2)):Object(r["createCommentVNode"])("",!0)])}var Lc=Object(r["defineComponent"])({props:{isClientConfigured:Boolean,isClientConfigurable:Boolean,isOAuthConfigured:Boolean,clientId:String,clientSecret:String,configuredMeasurables:{type:Object,required:!0},sitesInfos:{type:Object,required:!0},currentSite:{type:Object,required:!0},urlOptions:{type:[Object,Array],required:!0},hasOAuthError:[String,Boolean],accounts:{type:Object,required:!0},auth_nonce:{type:String,required:!0},formNonce:{type:String,required:!0},addYandexSiteConfigNonce:{type:String,required:!0},removeYandexSiteConfigNonce:{type:String,required:!0},removeYandexAccountNonce:{type:String,required:!0},countOfAccountsWithAccess:Number,userIsSuperUser:String,baseDomain:String,baseDomainUrl:String},components:{ContentBlock:s["ContentBlock"],Field:we["Field"],Notification:s["Notification"]},directives:{ContentTable:s["ContentTable"]},data(){return{removeAccountConfigName:"",removeAccountName:"",isAddingMeasurable:!1,currentSiteToAdd:this.currentSite,yandexAccountAndHostIdToAdd:null,clientIdToUse:"",clientSecretToUse:""}},methods:{removeAccountConfig(e,t){const n=this.sitesInfos;this.removeAccountConfigName=n[e].name,s["Matomo"].helper.modalConfirm(this.$refs.confirmRemoveAccountConfig,{yes(){t.target.submit()}})},removeAccount(e,t){this.removeAccountName=e.name,s["Matomo"].helper.modalConfirm(this.$refs.confirmDeleteAccount,{yes(){t.target.submit()}})}},computed:{configuredMeasurablesToDisplay(){const e=Object.entries(this.configuredMeasurables);return Object.fromEntries(e.filter(([,e])=>{const[t]=e.yandexAccountAndHostId.split("##");return!!this.accounts[t]}).map(([e,t])=>{const[n,c]=t.yandexAccountAndHostId.split("##"),o=this.accounts[n],{apiKey:r}=o,l=Object.entries(o.urls).find(([,e])=>e.host_id===c),a=null===l||void 0===l?void 0:l[0];return[e,Object.assign(Object.assign({},t),{},{account:n,host:c,hostUrl:a,apiKeyDisplay:Be(r)})]}))},forwardToYandexAuthUrl(){return"?"+s["MatomoUrl"].stringify(Object.assign(Object.assign({},s["MatomoUrl"].urlParsed.value),{},{action:"forwardToYandexAuth"}))},visitOAuthHowTo(){const e=Object(s["externalRawLink"])("https://matomo.org/faq/reports/import-yandex-search-keywords-into-matomo/");return Object(s["translate"])("SearchEngineKeywordsPerformance_VisitOAuthHowTo",`<a target="_blank" href="${e}" rel="noreferrer noopener">`,"</a>","Yandex")},accountsToDisplay(){const e=Object.entries(this.accounts),t=e.filter(([,e])=>e.hasAccess);return Object.fromEntries(t)}}});Lc.render=Ic;var Fc=Lc;const Gc={class:"form-group row"},Hc={class:"col s12"},qc=Object(r["createElementVNode"])("br",null,null,-1),Rc=["innerHTML"],zc=Object(r["createElementVNode"])("br",null,null,-1),$c=Object(r["createElementVNode"])("br",null,null,-1),Yc=Object(r["createElementVNode"])("br",null,null,-1),Wc={class:"form-group row"},Xc={class:"col s12 m6"},Jc={id:"configFileUploadForm",action:"",method:"POST",enctype:"multipart/form-data"},Qc=Object(r["createElementVNode"])("input",{type:"hidden",id:"client",name:"client"},null,-1),Zc=["value"],eo=["disabled"],to=Object(r["createElementVNode"])("span",{class:"icon-upload"},null,-1),no=Object(r["createElementVNode"])("span",{class:"icon-upload"},null,-1);function co(e,t,n,c,o,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("div",Gc,[Object(r["createElementVNode"])("div",Hc,[Object(r["createElementVNode"])("p",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureTheImporterLabel1")),1),Object(r["createElementVNode"])("p",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureTheImporterLabel2")),1),qc,Object(r["createElementVNode"])("span",{innerHTML:e.$sanitize(e.setupGoogleAnalyticsImportFaq)},null,8,Rc)]),Object(r["createElementVNode"])("p",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthExampleText")),1),zc,Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_GoogleAuthorizedJavaScriptOrigin"))+": ",1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.baseDomain),1),$c,Object(r["createElementVNode"])("strong",null,Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_GoogleAuthorizedRedirectUri"))+": ",1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.baseUrl)+Object(r["toDisplayString"])(e.redirectUri),1),Yc])])]),Object(r["createElementVNode"])("div",Wc,[Object(r["createElementVNode"])("div",Xc,[Object(r["createElementVNode"])("form",Jc,[Object(r["createElementVNode"])("input",{type:"file",id:"clientfile",name:"clientfile",accept:".json",onChange:t[0]||(t[0]=(...t)=>e.processFileChange&&e.processFileChange(...t)),style:{display:"none"}},null,32),Qc,Object(r["createElementVNode"])("input",{type:"hidden",name:"config_nonce",value:e.manualConfigNonce},null,8,Zc),Object(r["createElementVNode"])("button",{type:"button",class:"btn",onClick:t[1]||(t[1]=t=>e.selectConfigFile()),disabled:e.isUploadButtonDisabled},[Object(r["withDirectives"])(Object(r["createElementVNode"])("span",null,[to,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("General_Upload")),1)],512),[[r["vShow"],!e.isUploadButtonDisabled]]),Object(r["withDirectives"])(Object(r["createElementVNode"])("span",null,[no,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_Uploading")),1)],512),[[r["vShow"],e.isUploadButtonDisabled]])],8,eo)])])])],64)}var oo=Object(r["defineComponent"])({data(){return{redirectUri:"?module=SearchEngineKeywordsPerformance&action=processAuthCode",isSelectingFile:!1,isUploading:!1}},props:{manualConfigNonce:{type:String,required:!0},baseDomain:{type:String,required:!0},baseUrl:{type:String,required:!0}},methods:{selectConfigFile(){this.isSelectingFile=!0;const e=document.getElementById("clientfile");e&&e.click()},processFileChange(){const e=document.getElementById("clientfile"),t=document.getElementById("configFileUploadForm");e&&e.value&&t&&(this.isUploading=!0,t.submit())},checkForCancel(){if(!this.isSelectingFile||this.isUploading)return;const e=document.getElementById("clientfile");e&&!e.value&&(this.isSelectingFile=!1)}},computed:{setupGoogleAnalyticsImportFaq(){const e=Object(s["externalRawLink"])("https://matomo.org/faq/reports/import-google-search-keywords-in-matomo/#how-to-set-up-google-search-console-and-verify-your-website");return Object(s["translate"])("SearchEngineKeywordsPerformance_ConfigureTheImporterLabel3",`<a href="${e}" rel="noreferrer noopener" target="_blank">`,"</a>")},isUploadButtonDisabled(){return this.isSelectingFile||this.isUploading}},mounted(){document.body.onfocus=this.checkForCancel}});oo.render=co;var ro=oo;
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */}})}));
//# sourceMappingURL=SearchEngineKeywordsPerformance.umd.min.js.map