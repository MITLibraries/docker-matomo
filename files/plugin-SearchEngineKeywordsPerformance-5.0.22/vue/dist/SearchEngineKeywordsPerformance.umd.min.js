(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["SearchEngineKeywordsPerformance"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["SearchEngineKeywordsPerformance"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/SearchEngineKeywordsPerformance/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},a5a2:function(e,t){e.exports=n},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"AdminPage",(function(){return N})),n.d(t,"BingConfiguration",(function(){return qe})),n.d(t,"GoogleConfiguration",(function(){return Un})),n.d(t,"YandexConfiguration",(function(){return So})),n.d(t,"ConfigureConnection",(function(){return Go})),"undefined"!==typeof window){var r=window.document.currentScript,o=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(n.p=o[1])}var c=n("8bbf"),a={class:"keywordproviders"},l=Object(c["createElementVNode"])("div",{class:"clear"},null,-1);function i(e,t,n,r,o,i){var s=Object(c["resolveComponent"])("Provider"),u=Object(c["resolveComponent"])("ContentBlock");return Object(c["openBlock"])(),Object(c["createBlock"])(u,{"content-title":e.translate("SearchEngineKeywordsPerformance_SearchEngineKeywordsPerformance")},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigurationDescription")),1),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ProviderListDescription")),1),Object(c["createElementVNode"])("div",a,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.providers,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(s,{key:e.id,provider:e},null,8,["provider"])})),128)),l])]})),_:1},8,["content-title"])}var s=n("19dc"),u=["title"],d=["src","alt"],b=["innerHTML"],m=["innerHTML"],O={key:0,class:"experimental"},j=["href"],p={key:0,class:"btn"},f={key:1,class:"btn"};function g(e,t,n,r,o,a){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:Object(c["normalizeClass"])({keywordprovider:!0,warning:e.hasWarning,configured:!e.hasWarning&&e.provider.is_configured})},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.provider.logos,(function(t,n){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:n,class:Object(c["normalizeClass"])("logo ".concat(e.provider.logos.length>1?"double":"")),title:e.logoTooltip},[Object(c["createElementVNode"])("img",{src:t,alt:e.provider.name},null,8,d)],10,u)})),128)),Object(c["createElementVNode"])("h3",null,Object(c["toDisplayString"])(e.provider.name),1),Object(c["createElementVNode"])("p",{innerHTML:e.$sanitize(e.provider.description)},null,8,b),Object(c["createElementVNode"])("p",null,[Object(c["createElementVNode"])("em",{innerHTML:e.$sanitize(e.provider.note)},null,8,m)]),e.provider.is_experimental?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",O,"experimental")):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("a",{href:e.configureUrl,class:"cta"},[e.provider.is_configured?(Object(c["openBlock"])(),Object(c["createElementBlock"])("button",p,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ChangeConfiguration")),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("button",f,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_SetupConfiguration")),1))],8,j)],2)}var y=Object(c["defineComponent"])({props:{provider:{type:Object,required:!0}},computed:{hasWarning:function(){var e=this.provider;return e.is_configured&&(0===Object.keys(e.configured_site_ids).length||Object.keys(e.problems.sites).length||Object.keys(e.problems.accounts).length)},logoTooltip:function(){var e=this.provider,t=e.is_configured&&0===Object.keys(e.configured_site_ids).length;return t?Object(s["translate"])("SearchEngineKeywordsPerformance_ConfigAvailableNoWebsiteConfigured"):e.is_configured?Object(s["translate"])("SearchEngineKeywordsPerformance_IntegrationConfigured"):Object(s["translate"])("SearchEngineKeywordsPerformance_IntegrationNotConfigured")},configureUrl:function(){return"?".concat(s["MatomoUrl"].stringify(Object.assign(Object.assign({},s["MatomoUrl"].urlParsed.value),{},{action:"configure".concat(this.provider.id)})))}}});y.render=g;var E=y,h=Object(c["defineComponent"])({props:{providers:{type:Array,required:!0}},components:{ContentBlock:s["ContentBlock"],Provider:E}});h.render=i;var N=h;function v(e,t){return C(e)||A(e,t)||V(e,t)||S()}function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function V(e,t){if(e){if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(c.push(r.value),t&&c.length===t)break}catch(i){l=!0,o=i}finally{try{a||null==n["return"]||n["return"]()}finally{if(l)throw o}}return c}}function C(e){if(Array.isArray(e))return e}var w={class:"ui-confirm",id:"confirmRemoveAccountConfig",ref:"confirmRemoveAccountConfig"},B=["value"],D=["value"],_={class:"measurableList"},T=Object(c["createElementVNode"])("th",null,null,-1),P={key:0},K={colspan:"6"},x={key:0,class:"icon-error"},U={key:0,class:"icon-error"},M=["onSubmit"],I=["value"],L=["value"],F=["title"],G={key:1},H={colspan:"6",align:"right"},q={key:2,class:"configureMeasurableForm"},R={colspan:"2"},z={class:"bingAccountAndUrlToAdd"},Y={colspan:"3"},$={action:"",method:"post"},W=["value"],X=["value"],J=["value"],Q=["value"],Z={class:"ui-confirm",id:"confirmDeleteAccount",ref:"confirmDeleteAccount"},ee=["value"],te=["value"],ne={class:"accounts"},re=["innerHTML"],oe={key:0,class:"accounterror"},ce=Object(c["createElementVNode"])("span",{class:"icon-warning"},null,-1),ae={key:1},le={key:0,class:"accounterror"},ie=Object(c["createElementVNode"])("span",{class:"icon-warning"},null,-1),se={key:1},ue={key:0},de={class:"websites-list"},be=Object(c["createElementVNode"])("span",{class:"icon-success"},null,-1),me={key:1},Oe={class:"accounterror"},je=Object(c["createElementVNode"])("span",{class:"icon-warning"},null,-1),pe={key:2},fe={class:"websites-list"},ge=Object(c["createElementVNode"])("span",{class:"icon-error"},null,-1),ye={class:"cta"},Ee=["onSubmit"],he=["value"],Ne=["value"],ve={type:"submit",class:"btn"},Se={method:"POST",action:""},Ve=Object(c["createElementVNode"])("div",{class:"icon-add logo"},null,-1),ke=["innerHTML"],Ae={key:0,class:"accounterror"},Ce=Object(c["createElementVNode"])("br",null,null,-1),we=Object(c["createElementVNode"])("span",{class:"icon-warning"},null,-1),Be=["value"],De={class:"cta"},_e={type:"submit",class:"btn"},Te=Object(c["createElementVNode"])("div",{class:"clear"},null,-1);function Pe(e,t,n,r,o,a){var l=Object(c["resolveComponent"])("ContentBlock"),i=Object(c["resolveComponent"])("Field"),s=Object(c["resolveDirective"])("content-table");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_SearchEngineKeywordsPerformance")},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_BingConfigurationTitle")),1),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_BingConfigurationDescription")),1)]})),_:1},8,["content-title"]),Object.keys(e.accounts).length>0?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:0,class:Object(c["normalizeClass"])("websiteconfiguration ".concat(Object.keys(e.configuredMeasurables).length?"configured":""))},[Object(c["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurables")},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurableBelow")),1),Object(c["createElementVNode"])("div",w,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigRemovalConfirm",e.removeAccountConfigName)),1),Object(c["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,B),Object(c["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,D)],512),Object(c["createElementVNode"])("div",null,[Object(c["withDirectives"])(Object(c["createElementVNode"])("table",_,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("General_Measurable")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("Mobile_Account")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("Goals_URL")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_LastImport")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_CreatedBy")),1),T])]),Object(c["createElementVNode"])("tbody",null,[Object.keys(e.configuredMeasurables).length?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",P,[Object(c["createElementVNode"])("td",K,[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_NoWebsiteConfigured")),1)])])),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.configuredMeasurablesToDisplay,(function(t,n,r){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:r,class:Object(c["normalizeClass"])(e.sitesInfos[n].accountValid&&e.sitesInfos[n].urlValid?"":"error")},[Object(c["createElementVNode"])("td",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.sitesInfos[n].name)+" ",1),Object(c["createElementVNode"])("span",null,"("+Object(c["toDisplayString"])(e.sitesInfos[n].main_url)+")",1)]),Object(c["createElementVNode"])("td",null,[e.sitesInfos[n].accountValid?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",x)),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.apiKeyDisplay),1)]),Object(c["createElementVNode"])("td",null,[e.sitesInfos[n].urlValid?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",U)),Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.url),1)]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.sitesInfos[n].lastRun),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.createdByUser),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(c["withModifiers"])((function(t){return e.removeAccountConfig(n,t)}),["prevent"])},[Object(c["createElementVNode"])("input",{type:"hidden",name:"removeConfig",value:n},null,8,I),Object(c["createElementVNode"])("input",{type:"hidden",name:"removeSiteConfigNonce",value:e.removeBingSiteConfigNonce},null,8,L),t.isDeletionAllowed?(Object(c["openBlock"])(),Object(c["createElementBlock"])("button",{key:0,type:"submit",class:"btn-flat icon-delete",title:e.translate("General_Delete")},null,8,F)):Object(c["createCommentVNode"])("",!0)],40,M)])],2)})),128)),e.countOfAccountsWithAccess?Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",G,[Object(c["createElementVNode"])("td",H,[Object(c["createElementVNode"])("button",{class:"btn",onClick:t[0]||(t[0]=Object(c["withModifiers"])((function(t){return e.isAddingMeasurable=!0}),["prevent"]))},Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AddConfiguration")),1)])],512)),[[c["vShow"],!e.isAddingMeasurable]]):Object(c["createCommentVNode"])("",!0),e.countOfAccountsWithAccess?Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",q,[Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(i,{uicontrol:"site",modelValue:e.currentSiteToAdd,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.currentSiteToAdd=t}),title:e.translate("CoreHome_ChooseX",e.translate("General_Measurable"))},null,8,["modelValue","title"])]),Object(c["createElementVNode"])("td",R,[Object(c["createElementVNode"])("div",z,[Object(c["createVNode"])(i,{uicontrol:"select",modelValue:e.bingAccountAndUrlToAdd,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.bingAccountAndUrlToAdd=t}),title:e.translate("SearchEngineKeywordsPerformance_UrlOfAccount"),options:e.urlOptions},null,8,["modelValue","title","options"])])]),Object(c["createElementVNode"])("td",Y,[Object(c["createElementVNode"])("form",$,[Object(c["createElementVNode"])("input",{type:"hidden",name:"bingSiteId",value:e.currentSiteToAdd.id},null,8,W),Object(c["createElementVNode"])("input",{type:"hidden",name:"addSiteConfigNonce",value:e.addBingSiteConfigNonce},null,8,X),Object(c["createElementVNode"])("input",{type:"hidden",name:"bingAccountAndUrl",value:e.bingAccountAndUrlToAdd},null,8,J),Object(c["createElementVNode"])("input",{type:"submit",class:"btn",value:e.translate("General_Save")},null,8,Q)])])],512)),[[c["vShow"],e.isAddingMeasurable]]):Object(c["createCommentVNode"])("",!0)])],512),[[s]])])]})),_:1},8,["content-title"])],2)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])("accountconfiguration ".concat(Object.keys(e.accounts).length>0?"configured":""))},[Object(c["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_ManageAPIKeys")},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",Z,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountRemovalConfirm",e.removeAccountName)),1),Object(c["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,ee),Object(c["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,te)],512),Object(c["createElementVNode"])("div",ne,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.accountsToDisplay,(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:t.username,class:Object(c["normalizeClass"])("account ".concat(0===Object.keys(t.urls).length||"string"===typeof t.hasError?"invalid":""))},[Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])("icon-".concat(0===Object.keys(t.urls).length||"string"===typeof t.hasError?"warning":"success"," logo"))},null,2),Object(c["createElementVNode"])("h3",null,Object(c["toDisplayString"])(e.getDisplayApiKey(t.apiKey)),1),Object(c["createElementVNode"])("p",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_AccountAddedBy",t.username,t.created_formatted))},null,8,re),"string"===typeof t.hasError?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",oe,[ce,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_BingAccountError",t.hasError)),1)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ae,[0===Object.keys(t.urls).length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",le,[ie,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",se,[Object.values(t.urls).some((function(e){return e}))?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ue,[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AvailableSites")),1),Object(c["createElementVNode"])("ul",de,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object.entries(t.urls).filter((function(e){var t=v(e,2),n=t[1];return n})),(function(e,t){var n=v(e,1),r=n[0];return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t},[be,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(r),1)])})),128))])])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",me,[Object(c["createElementVNode"])("p",Oe,[je,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])])),Object.values(t.urls).some((function(e){return!e}))?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",pe,[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_UnverifiedSites")),1),Object(c["createElementVNode"])("ul",fe,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object.entries(t.urls).filter((function(e){var t=v(e,2),n=t[1];return!n})),(function(e,t){var n=v(e,1),r=n[0];return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t},[ge,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(r),1)])})),128))])])):Object(c["createCommentVNode"])("",!0)]))])),Object(c["createElementVNode"])("div",ye,[Object(c["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(c["withModifiers"])((function(n){return e.removeAccount(t,n)}),["prevent"])},[Object(c["createElementVNode"])("input",{type:"hidden",name:"remove",value:t.apiKey},null,8,he),Object(c["createElementVNode"])("input",{type:"hidden",name:"removeAccountNonce",value:e.removeBingAccountNonce},null,8,Ne),Object(c["createElementVNode"])("button",ve,Object(c["toDisplayString"])(e.translate("General_Remove")),1)],40,Ee)])],2)})),128)),Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])("account add ".concat(e.hasApiKeyError?"invalid":""))},[Object(c["createElementVNode"])("form",Se,[Ve,Object(c["createElementVNode"])("h3",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AddAPIKey")),1),Object(c["createElementVNode"])("span",{innerHTML:e.$sanitize(e.bingApiKeyInstructionText)},null,8,ke),e.hasApiKeyError?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",Ae,[Ce,we,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_BingAccountError",e.error)),1)])):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(i,{uicontrol:"text","full-width":!0,name:"apikey",modelValue:e.apiKeyToAdd,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.apiKeyToAdd=t}),title:e.translate("SearchEngineKeywordsPerformance_APIKey")},null,8,["modelValue","title"]),Object(c["createElementVNode"])("input",{type:"hidden",name:"config_nonce",value:e.formNonce},null,8,Be),Object(c["createElementVNode"])("div",De,[Object(c["createElementVNode"])("button",_e,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AddAPIKey")),1)])])],2),Te])]})),_:1},8,["content-title"])],2)])}var Ke=n("a5a2");
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */function xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(e.substr(0,5),"*****").concat(e.substr(e.length-5,5))}function Ue(e,t){return Ge(e)||Fe(e,t)||Ie(e,t)||Me()}function Me(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ie(e,t){if(e){if("string"===typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fe(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(c.push(r.value),t&&c.length===t)break}catch(i){l=!0,o=i}finally{try{a||null==n["return"]||n["return"]()}finally{if(l)throw o}}return c}}function Ge(e){if(Array.isArray(e))return e}var He=Object(c["defineComponent"])({props:{configuredMeasurables:{type:Object,required:!0},accounts:{type:Object,required:!0},sitesInfos:{type:Object,required:!0},currentSite:{type:Object,required:!0},urlOptions:{type:[Object,Array],required:!0},error:String,apikey:String,formNonce:String,addBingSiteConfigNonce:String,removeBingSiteConfigNonce:String,removeBingAccountNonce:String,countOfAccountsWithAccess:Number,userIsSuperUser:String},data:function(){return{removeAccountConfigName:"",removeAccountName:"",isAddingMeasurable:!1,currentSiteToAdd:this.currentSite,bingAccountAndUrlToAdd:null,apiKeyToAdd:this.apikey||""}},components:{ContentBlock:s["ContentBlock"],Field:Ke["Field"]},directives:{ContentTable:s["ContentTable"]},methods:{removeAccountConfig:function(e,t){var n=this.sitesInfos;this.removeAccountConfigName=n[e].name,s["Matomo"].helper.modalConfirm(this.$refs.confirmRemoveAccountConfig,{yes:function(){t.target.submit()}})},getDisplayApiKey:xe,removeAccount:function(e,t){this.removeAccountName=this.getDisplayApiKey(e.apiKey),s["Matomo"].helper.modalConfirm(this.$refs.confirmDeleteAccount,{yes:function(){t.target.submit()}})}},computed:{hasApiKeyError:function(){return"undefined"!==typeof this.error&&null!==this.error},configuredMeasurablesToDisplay:function(){var e=this,t=Object.entries(this.configuredMeasurables);return Object.fromEntries(t.filter((function(t){var n=Ue(t,2),r=n[1],o=r.bingSiteUrl.split("##"),c=Ue(o,1),a=c[0];return!!e.accounts[a]})).map((function(t){var n=Ue(t,2),r=n[0],o=n[1],c=o.bingSiteUrl.split("##"),a=Ue(c,2),l=a[0],i=a[1],s=e.accounts[l].apiKey;return[r,Object.assign(Object.assign({},o),{},{account:l,url:i,apiKeyDisplay:e.getDisplayApiKey(s)})]})))},bingApiKeyInstructionText:function(){var e=Object(s["externalRawLink"])("https://matomo.org/faq/reports/import-bing-and-yahoo-search-keywords-into-matomo/");return Object(s["translate"])("SearchEngineKeywordsPerformance_BingAPIKeyInstruction",'<a href="https://www.bing.com/webmasters" target="_new" rel="noreferrer noopener">',"</a>",'<a href="'.concat(e,'" target="_blank" rel="noreferrer noopener">'),"</a>")},accountsToDisplay:function(){var e=Object.entries(this.accounts),t=e.filter((function(e){var t=Ue(e,2),n=t[1];return n.hasAccess}));return Object.fromEntries(t)}}});He.render=Pe;var qe=He;function Re(e,t){return Xe(e)||We(e,t)||Ye(e,t)||ze()}function ze(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ye(e,t){if(e){if("string"===typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$e(e,t):void 0}}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function We(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(c.push(r.value),t&&c.length===t)break}catch(i){l=!0,o=i}finally{try{a||null==n["return"]||n["return"]()}finally{if(l)throw o}}return c}}function Xe(e){if(Array.isArray(e))return e}var Je={key:0},Qe={class:"alert alert-warning"},Ze={key:1},et={class:"ui-confirm",id:"confirmRemoveAccountConfig",ref:"confirmRemoveAccountConfig"},tt=["value"],nt=["value"],rt={class:"measurableList"},ot=Object(c["createElementVNode"])("th",null,null,-1),ct={key:0},at={colspan:"7"},lt=["innerHTML"],it={key:0,class:"icon-error"},st={key:0,class:"icon-error"},ut=Object(c["createElementVNode"])("br",null,null,-1),dt=["title"],bt=Object(c["createElementVNode"])("span",{class:"icon-info"},null,-1),mt=["title"],Ot=Object(c["createElementVNode"])("span",{class:"icon-info"},null,-1),jt=["onSubmit"],pt=["value"],ft=["value"],gt=["title"],yt={key:1,class:"configureMeasurableForm"},Et={class:"account-select"},ht={colspan:"4"},Nt={action:"",method:"post"},vt=["value"],St=["value"],Vt=["value"],kt=["value"],At=["value"],Ct={key:0},wt={key:2,class:"oauthconfiguration"},Bt={class:"section-heading"},Dt={class:"ui-confirm",id:"confirmDeleteAccount",ref:"confirmDeleteAccount"},_t=["value"],Tt=["value"],Pt={class:"oauthconfigoptions"},Kt={key:0},xt={key:1},Ut={key:2},Mt={key:0},It=Object(c["createElementVNode"])("br",null,null,-1),Lt={class:"accounts"},Ft={class:"logo"},Gt=["src"],Ht=["innerHTML"],qt={key:0},Rt={class:"accounterror"},zt=Object(c["createElementVNode"])("span",{class:"icon-warning"},null,-1),Yt={key:1},$t={key:0},Wt={class:"accounterror"},Xt=Object(c["createElementVNode"])("span",{class:"icon-warning"},null,-1),Jt={key:1},Qt={key:0},Zt={class:"websites-list"},en=Object(c["createElementVNode"])("span",{class:"icon-success"},null,-1),tn={key:1,class:"accounterror"},nn=Object(c["createElementVNode"])("span",{class:"icon-warning"},null,-1),rn={key:2},on={class:"websites-list"},cn=Object(c["createElementVNode"])("span",{class:"icon-error"},null,-1),an={class:"cta"},ln=["onSubmit"],sn=["value"],un=["value"],dn={type:"submit",class:"btn"},bn={class:"account add"},mn=Object(c["createElementVNode"])("div",{class:"icon-add logo"},null,-1),On=["innerHTML"],jn=["innerHTML"],pn=["innerHTML"],fn={class:"cta"},gn=["action"],yn=["value"],En={type:"submit",class:"btn"},hn=Object(c["createElementVNode"])("div",{class:"clear"},null,-1),Nn={key:3,class:"clientconfiguration"},vn={class:"section-heading"},Sn=Object(c["createElementVNode"])("br",null,null,-1),Vn=["action"],kn=["value"],An={type:"submit",class:"btn"},Cn={key:4};function wn(e,t,n,r,o,a){var l=Object(c["resolveComponent"])("Field"),i=Object(c["resolveComponent"])("Notification"),s=Object(c["resolveComponent"])("ContentBlock"),u=Object(c["resolveDirective"])("content-table");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createVNode"])(s,{"content-title":e.translate("SearchEngineKeywordsPerformance_SearchEngineKeywordsPerformance")},{default:Object(c["withCtx"])((function(){return[e.isClientConfigured||!e.isClientConfigurable||e.userIsSuperUser?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Je,[Object(c["createElementVNode"])("div",Qe,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_GooglePendingConfigurationErrorMessage")),1)])),e.isClientConfigured&&e.isOAuthConfigured?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Ze,[Object(c["createElementVNode"])("h3",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurables")),1),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurableBelow")),1),Object(c["createElementVNode"])("div",et,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigRemovalConfirm",e.removeAccountConfigName)),1),Object(c["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,tt),Object(c["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,nt)],512),Object(c["withDirectives"])(Object(c["createElementVNode"])("table",rt,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("General_Measurable")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_EnabledSearchTypes")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("Mobile_Account")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("Goals_URL")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_LastImport")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_CreatedBy")),1),ot])]),Object(c["createElementVNode"])("tbody",null,[0===Object.keys(e.configuredMeasurablesToDisplay).length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",ct,[Object(c["createElementVNode"])("td",at,[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_NoWebsiteConfigured")),1)])])):Object(c["createCommentVNode"])("",!0),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.configuredMeasurablesToDisplay,(function(t,n,r){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:r,class:Object(c["normalizeClass"])(e.sitesInfos[n].accountValid&&e.sitesInfos[n].urlValid?"":"error")},[Object(c["createElementVNode"])("td",{innerHTML:e.$sanitize(e.sitesInfos[n].name)},null,8,lt),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.googleWebKeywords?e.translate("SearchEngineKeywordsPerformance_KeywordTypeWeb"):"")+" "+Object(c["toDisplayString"])(t.googleImageKeywords?e.translate("SearchEngineKeywordsPerformance_KeywordTypeImage"):"")+" "+Object(c["toDisplayString"])(t.googleVideoKeywords?e.translate("SearchEngineKeywordsPerformance_KeywordTypeVideo"):"")+" "+Object(c["toDisplayString"])(t.googleNewsKeywords?e.translate("SearchEngineKeywordsPerformance_KeywordTypeNews"):""),1),Object(c["createElementVNode"])("td",null,[e.sitesInfos[n].accountValid?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",it)),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.accounts[t.account].name),1)]),Object(c["createElementVNode"])("td",null,[e.sitesInfos[n].urlValid?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",st)),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.url.replaceAll("sc-domain:",""))+" ",1),ut,/^sc-domain:/.test(t.url)?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:1,class:"property-type",title:e.translate("SearchEngineKeywordsPerformance_DomainPropertyInfo")},[bt,Object(c["createTextVNode"])(" ("+Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_DomainProperty"))+") ",1)],8,dt)):/^http/.test(t.url)?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:2,class:"property-type",title:e.translate("SearchEngineKeywordsPerformance_URLPrefixPropertyInfo")},[Ot,Object(c["createTextVNode"])(" ("+Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_URLPrefixProperty"))+") ",1)],8,mt)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.sitesInfos[n].lastRun),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.createdByUser),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(c["withModifiers"])((function(t){return e.removeAccountConfig(n,t)}),["prevent"])},[Object(c["createElementVNode"])("input",{type:"hidden",name:"removeConfig",value:n},null,8,pt),Object(c["createElementVNode"])("input",{type:"hidden",name:"removeSiteConfigNonce",value:e.removeGoogleSiteConfigNonce},null,8,ft),t.isDeletionAllowed?(Object(c["openBlock"])(),Object(c["createElementBlock"])("button",{key:0,type:"submit",class:"btn-flat icon-delete",title:e.translate("General_Delete")},null,8,gt)):Object(c["createCommentVNode"])("",!0)],40,jt)])],2)})),128)),e.countOfAccountsWithAccess?Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",yt,[Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(l,{uicontrol:"site","full-width":!0,modelValue:e.currentSiteToAdd,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.currentSiteToAdd=t}),title:e.translate("CoreHome_ChooseX",e.translate("General_Measurable"))},null,8,["modelValue","title"])]),Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(l,{uicontrol:"checkbox",modelValue:e.googleTypesToAdd,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.googleTypesToAdd=t}),"var-type":"array",title:"keyword types to fetch","full-width":!0,options:e.googleTypeOptions},null,8,["modelValue","options"])]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",Et,[Object(c["createVNode"])(l,{uicontrol:"select",modelValue:e.googleAccountAndUrlToAdd,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.googleAccountAndUrlToAdd=t}),title:e.translate("SearchEngineKeywordsPerformance_UrlOfAccount"),"full-width":!0,options:e.urlOptions},null,8,["modelValue","title","options"])])]),Object(c["createElementVNode"])("td",ht,[Object(c["createElementVNode"])("form",Nt,[Object(c["createElementVNode"])("input",{type:"hidden",name:"googleSiteId",value:e.currentSiteToAdd.id},null,8,vt),Object(c["createElementVNode"])("input",{type:"hidden",name:"addSiteConfigNonce",value:e.addGoogleSiteConfigNonce},null,8,St),Object(c["createElementVNode"])("input",{type:"hidden",name:"googleAccountAndUrl",value:e.googleAccountAndUrlToAdd},null,8,Vt),Object(c["createElementVNode"])("input",{type:"hidden",name:"googleTypes",value:e.googleTypesToAdd.length?e.googleTypesToAdd:"web"},null,8,kt),Object(c["createElementVNode"])("input",{type:"submit",class:"btn",value:e.translate("General_Save")},null,8,At)])])],512)),[[c["vShow"],e.isAddingMeasurable]]):Object(c["createCommentVNode"])("",!0)])],512),[[u]]),e.countOfAccountsWithAccess?Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Ct,[Object(c["createElementVNode"])("button",{id:"addWebsiteBtn",class:"btn",onClick:t[3]||(t[3]=function(t){return e.isAddingMeasurable=!0})},Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AddConfiguration")),1)],512)),[[c["vShow"],!e.isAddingMeasurable]]):Object(c["createCommentVNode"])("",!0)])):Object(c["createCommentVNode"])("",!0),e.isClientConfigured?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",wt,[Object(c["createElementVNode"])("h3",Bt,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectGoogleAccounts")),1),Object(c["createElementVNode"])("div",Dt,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountRemovalConfirm",e.removeAccountName)),1),Object(c["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,_t),Object(c["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,Tt)],512),Object(c["createElementVNode"])("div",Pt,[e.isOAuthConfigured?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",Kt,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_CurrentlyConnectedAccounts",e.countOfAccountsWithAccess)),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",xt,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectFirstAccount")),1)),e.hasOAuthError?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",Ut,[Object(c["createVNode"])(i,{context:"error",type:"transient"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthError"))+" ",1),e.hasOAuthError.length>5?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Mt,[It,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.hasOAuthError),1)])):Object(c["createCommentVNode"])("",!0)]})),_:1})])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",Lt,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.accountsToDisplay,(function(t,n){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:n,class:"account"},[Object(c["createElementVNode"])("div",Ft,[Object(c["createElementVNode"])("img",{src:t.picture},null,8,Gt)]),Object(c["createElementVNode"])("h3",null,Object(c["toDisplayString"])(t.name),1),Object(c["createElementVNode"])("p",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_AccountAddedBy",t.username,t.created_formatted))},null,8,Ht),"string"===typeof t.hasError?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",qt,[Object(c["createElementVNode"])("p",Rt,[zt,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountConnectionValidationError"))+" "+Object(c["toDisplayString"])(t.hasError),1)]),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ReAddAccountIfPermanentError")),1)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Yt,[0===Object.keys(t.urls).length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",$t,[Object(c["createElementVNode"])("p",Wt,[Xt,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Jt,[e.accountHasAvailableSites(t)?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Qt,[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AvailableSites")),1),Object(c["createElementVNode"])("ul",Zt,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object.entries(t.urls).filter((function(e){var t=Re(e,2),n=t[1];return"siteUnverifiedUser"!==n})),(function(e,t){var n=Re(e,1),r=n[0];return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t},[en,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(r.replaceAll("sc-domain:","")),1)])})),128))])])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",tn,[nn,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])),-1!==Object.values(t.urls).indexOf("siteUnverifiedUser")?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",rn,[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_UnverifiedSites")),1),Object(c["createElementVNode"])("ul",on,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object.entries(t.urls).filter((function(e){var t=Re(e,2),n=t[1];return"siteUnverifiedUser"===n})),(function(e,t){var n=Re(e,1),r=n[0];return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t},[cn,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(r.replaceAll("sc-domain:","")),1)])})),128))])])):Object(c["createCommentVNode"])("",!0)]))])),Object(c["createElementVNode"])("div",an,[Object(c["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(c["withModifiers"])((function(n){return e.removeAccount(t,n)}),["prevent"])},[Object(c["createElementVNode"])("input",{type:"hidden",name:"remove",value:n},null,8,sn),Object(c["createElementVNode"])("input",{type:"hidden",name:"removeAccountNonce",value:e.removeGoogleAccountNonce},null,8,un),Object(c["createElementVNode"])("button",dn,Object(c["toDisplayString"])(e.translate("General_Remove")),1)],40,ln)])])})),128)),Object(c["createElementVNode"])("div",bn,[mn,Object(c["createElementVNode"])("h3",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectAccount")),1),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectAccountDescription","Google")),1),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_RequiredAccessTypes")),1),Object(c["createElementVNode"])("ul",null,[Object(c["createElementVNode"])("li",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_GoogleAccountAccessTypeSearchConsoleData"))},null,8,On),Object(c["createElementVNode"])("li",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_GoogleAccountAccessTypeProfileInfo"))},null,8,jn),Object(c["createElementVNode"])("li",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_GoogleAccountAccessTypeOfflineAccess"))},null,8,pn)]),Object(c["createElementVNode"])("div",fn,[Object(c["createElementVNode"])("form",{method:"post",action:e.forwardToAuthUrl,id:"clientauthform"},[Object(c["createElementVNode"])("input",{type:"hidden",name:"auth_nonce",value:e.authNonce},null,8,yn),Object(c["createElementVNode"])("button",En,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_StartOAuth")),1)],8,gn)])]),hn])])])):Object(c["createCommentVNode"])("",!0),e.isClientConfigurable&&e.isClientConfigured&&e.userIsSuperUser?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Nn,[Object(c["createElementVNode"])("h3",vn,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthClientConfig")),1),Object(c["createElementVNode"])("p",null,[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ClientId"))+":",1),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.clientId),1)]),Object(c["createElementVNode"])("p",null,[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ClientSecret"))+":",1),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.clientSecret),1)]),Sn,Object(c["createElementVNode"])("form",{action:e.removeConfigUrl,method:"POST",enctype:"multipart/form-data",id:"removeConfigForm"},[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_DeleteUploadedClientConfig"))+":",1),Object(c["createElementVNode"])("input",{type:"hidden",name:"config_nonce",value:e.formNonce},null,8,kn),Object(c["createElementVNode"])("button",An,Object(c["toDisplayString"])(e.translate("General_Remove")),1)],8,Vn)])):Object(c["createCommentVNode"])("",!0),e.userIsSuperUser?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Cn,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.componentExtensions,(function(t,n){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:n},[(Object(c["openBlock"])(),Object(c["createBlock"])(Object(c["resolveDynamicComponent"])(t),{"manual-config-nonce":e.configConnectProps.manualConfigNonce,"base-domain":e.configConnectProps.baseDomain,"base-url":e.configConnectProps.baseUrl,"manual-action-url":e.configConnectProps.manualActionUrl,"primary-text":e.configConnectProps.primaryText,"radio-options":e.configConnectProps.radioOptions,"manual-config-text":e.configConnectProps.manualConfigText,"connect-accounts-url":e.configConnectProps.connectAccountsUrl,"connect-accounts-btn-text":e.configConnectProps.connectAccountsBtnText,"auth-url":e.configConnectProps.authUrl,"unlink-url":e.configConnectProps.unlinkUrl,strategy:e.configConnectProps.strategy,"connected-with":e.configConnectProps.connectedWith},null,8,["manual-config-nonce","base-domain","base-url","manual-action-url","primary-text","radio-options","manual-config-text","connect-accounts-url","connect-accounts-btn-text","auth-url","unlink-url","strategy","connected-with"]))])})),128))])):Object(c["createCommentVNode"])("",!0)]})),_:1},8,["content-title"])])}function Bn(e,t){return Kn(e)||Pn(e,t)||_n(e,t)||Dn()}function Dn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _n(e,t){if(e){if("string"===typeof e)return Tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tn(e,t):void 0}}function Tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pn(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(c.push(r.value),t&&c.length===t)break}catch(i){l=!0,o=i}finally{try{a||null==n["return"]||n["return"]()}finally{if(l)throw o}}return c}}function Kn(e){if(Array.isArray(e))return e}var xn=Object(c["defineComponent"])({props:{configuredMeasurables:{type:Object,required:!0},isClientConfigured:Boolean,isClientConfigurable:Boolean,isOAuthConfigured:Boolean,clientId:String,clientSecret:String,accounts:{type:Object,required:!0},sitesInfos:{type:Object,required:!0},currentSite:{type:Object,required:!0},urlOptions:{type:[Object,Array],required:!0},hasOAuthError:[String,Boolean],authNonce:{type:String,required:!0},formNonce:String,addGoogleSiteConfigNonce:String,removeGoogleSiteConfigNonce:String,removeGoogleAccountNonce:String,countOfAccountsWithAccess:Number,userIsSuperUser:String,extensions:Array,removeConfigUrl:String,configureConnectionProps:{type:Object,required:!0}},components:{ContentBlock:s["ContentBlock"],Field:Ke["Field"],Notification:s["Notification"]},directives:{ContentTable:s["ContentTable"]},data:function(){return{removeAccountConfigName:"",removeAccountName:"",isAddingMeasurable:!1,currentSiteToAdd:this.currentSite,googleAccountAndUrlToAdd:null,googleTypesToAdd:["web"],clientFile:null,clientText:""}},methods:{removeAccountConfig:function(e,t){var n=this.sitesInfos;this.removeAccountConfigName=n[e].name,s["Matomo"].helper.modalConfirm(this.$refs.confirmRemoveAccountConfig,{yes:function(){t.target.submit()}})},removeAccount:function(e,t){this.removeAccountName=e.name,s["Matomo"].helper.modalConfirm(this.$refs.confirmDeleteAccount,{yes:function(){t.target.submit()}})},accountHasAvailableSites:function(e){var t=["siteOwner","siteFullUser","siteRestrictedUser"];return Object.values(e.urls).some((function(e){return-1!==t.indexOf(e)}))}},computed:{configuredMeasurablesToDisplay:function(){var e=this,t=Object.entries(this.configuredMeasurables);return Object.fromEntries(t.filter((function(t){var n=Bn(t,2),r=n[1],o=r.googleSearchConsoleUrl.split("##"),c=Bn(o,1),a=c[0];return!!e.accounts[a]})).map((function(t){var n=Bn(t,2),r=n[0],o=n[1],c=o.googleSearchConsoleUrl.split("##"),a=Bn(c,2),l=a[0],i=a[1],s=e.accounts[l].apiKey;return[r,Object.assign(Object.assign({},o),{},{account:l,url:i,apiKeyDisplay:xe(s)})]})))},accountsToDisplay:function(){var e=Object.entries(this.accounts),t=e.filter((function(e){var t=Bn(e,2),n=t[1];return n.hasAccess}));return Object.fromEntries(t)},googleTypeOptions:function(){return{web:Object(s["translate"])("SearchEngineKeywordsPerformance_KeywordTypeWeb"),image:Object(s["translate"])("SearchEngineKeywordsPerformance_KeywordTypeImage"),video:Object(s["translate"])("SearchEngineKeywordsPerformance_KeywordTypeVideo"),news:Object(s["translate"])("SearchEngineKeywordsPerformance_KeywordTypeNews")}},forwardToAuthUrl:function(){return"?".concat(s["MatomoUrl"].stringify(Object.assign(Object.assign({},s["MatomoUrl"].urlParsed.value),{},{action:"forwardToAuth"})))},visitOAuthHowTo:function(){var e=Object(s["externalRawLink"])("https://matomo.org/faq/reports/import-google-search-keywords-in-matomo/#how-to-set-up-google-oauth-client-config");return Object(s["translate"])("SearchEngineKeywordsPerformance_VisitOAuthHowTo",'<a target="_blank" href="'.concat(e,'" rel="noreferrer noopener">'),"</a>","Google")},componentExtensions:function(){var e=this.extensions;return Object(c["markRaw"])(e.map((function(e){return Object(s["useExternalPluginComponent"])(e.plugin,e.component)})))},configConnectProps:function(){return this.configureConnectionProps}}});xn.render=wn;var Un=xn;function Mn(e,t){return Hn(e)||Gn(e,t)||Ln(e,t)||In()}function In(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ln(e,t){if(e){if("string"===typeof e)return Fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fn(e,t):void 0}}function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gn(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(c.push(r.value),t&&c.length===t)break}catch(i){l=!0,o=i}finally{try{a||null==n["return"]||n["return"]()}finally{if(l)throw o}}return c}}function Hn(e){if(Array.isArray(e))return e}var qn={class:"ui-confirm",id:"confirmRemoveAccountConfig",ref:"confirmRemoveAccountConfig"},Rn=["value"],zn=["value"],Yn={class:"measurableList"},$n=Object(c["createElementVNode"])("th",null,null,-1),Wn=["innerHTML"],Xn={key:0,class:"icon-error"},Jn={key:0,class:"icon-error"},Qn=["onSubmit"],Zn=["value"],er=["value"],tr=["title"],nr={key:0},rr={colspan:"6",align:"right"},or={key:1,class:"configureMeasurableForm"},cr={colspan:"2"},ar={class:"account-select"},lr={colspan:"3"},ir={action:"",method:"post"},sr=["value"],ur=["value"],dr=["value"],br=["value"],mr={class:"ui-confirm",id:"confirmDeleteAccount",ref:"confirmDeleteAccount"},Or=["value"],jr=["value"],pr={class:"oauthconfigoptions"},fr={key:0},gr={key:1},yr={key:2},Er={key:0},hr=Object(c["createElementVNode"])("br",null,null,-1),Nr={class:"accounts"},vr={class:"logo"},Sr=["src"],Vr=["innerHTML"],kr={key:0},Ar={class:"accounterror"},Cr=Object(c["createElementVNode"])("span",{class:"icon-warning"},null,-1),wr={key:1},Br={key:0,class:"accounterror"},Dr=Object(c["createElementVNode"])("span",{class:"icon-warning"},null,-1),_r={key:1},Tr={key:0},Pr={class:"websites-list"},Kr=Object(c["createElementVNode"])("span",{class:"icon-success"},null,-1),xr={key:1,class:"accounterror"},Ur=Object(c["createElementVNode"])("span",{class:"icon-warning"},null,-1),Mr={key:2},Ir={class:"websites-list"},Lr=Object(c["createElementVNode"])("span",{class:"icon-error"},null,-1),Fr={key:2,class:"accounterror"},Gr=Object(c["createElementVNode"])("span",{class:"icon-warning"},null,-1),Hr={key:3,class:"accounterror"},qr=Object(c["createElementVNode"])("span",{class:"icon-warning"},null,-1),Rr=["innerHTML"],zr=["innerHTML"],Yr={class:"cta"},$r=["action"],Wr=["value"],Xr={type:"submit",class:"btn"},Jr=["onSubmit"],Qr=["value"],Zr=["value"],eo={type:"submit",class:"btn"},to={class:"account add"},no=Object(c["createElementVNode"])("div",{class:"icon-add logo"},null,-1),ro={class:"cta"},oo=["action"],co=["value"],ao={type:"submit",class:"btn"},lo=Object(c["createElementVNode"])("div",{class:"clear"},null,-1),io={key:3,class:"clientconfighelp"},so=["innerHTML"],uo=Object(c["createElementVNode"])("br",null,null,-1),bo=Object(c["createElementVNode"])("br",null,null,-1),mo={method:"post",action:"",id:"clientconfigform"},Oo=["value"],jo={type:"submit",class:"btn"};function po(e,t,n,r,o,a){var l=Object(c["resolveComponent"])("ContentBlock"),i=Object(c["resolveComponent"])("Field"),s=Object(c["resolveComponent"])("Notification"),u=Object(c["resolveDirective"])("content-table");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",null,[Object(c["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_SearchEngineKeywordsPerformance")},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_YandexConfigurationTitle")),1),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_YandexConfigurationDescription")),1)]})),_:1},8,["content-title"]),e.isClientConfigured&&e.isOAuthConfigured?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:0,class:Object(c["normalizeClass"])(Object.keys(e.configuredMeasurables).length?"configured":"")},[Object(c["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurables")},{default:Object(c["withCtx"])((function(){var n;return[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureMeasurableBelow")),1),Object(c["createElementVNode"])("div",qn,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigRemovalConfirm",e.removeAccountConfigName)),1),Object(c["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,Rn),Object(c["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,zn)],512),Object(c["withDirectives"])(Object(c["createElementVNode"])("table",Yn,[Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("General_Measurable")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("Mobile_Account")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("Goals_URL")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_LastImport")),1),Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_CreatedBy")),1),$n])]),Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.configuredMeasurablesToDisplay,(function(t,n,r){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:r,class:Object(c["normalizeClass"])(e.sitesInfos[n].accountValid&&e.sitesInfos[n].urlValid?"":"error")},[Object(c["createElementVNode"])("td",{innerHTML:e.$sanitize(e.sitesInfos[n].name)},null,8,Wn),Object(c["createElementVNode"])("td",null,[e.sitesInfos[n].accountValid?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Xn)),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.accounts[t.account].name),1)]),Object(c["createElementVNode"])("td",null,[e.sitesInfos[n].urlValid?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Jn)),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.hostUrl||t.host),1)]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.sitesInfos[n].lastRun),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.createdByUser),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(c["withModifiers"])((function(t){return e.removeAccountConfig(n,t)}),["prevent"])},[Object(c["createElementVNode"])("input",{type:"hidden",name:"removeConfig",value:n},null,8,Zn),Object(c["createElementVNode"])("input",{type:"hidden",name:"removeSiteConfigNonce",value:e.removeYandexSiteConfigNonce},null,8,er),t.isDeletionAllowed?(Object(c["openBlock"])(),Object(c["createElementBlock"])("button",{key:0,type:"submit",class:"btn-flat icon-delete",title:e.translate("General_Delete")},null,8,tr)):Object(c["createCommentVNode"])("",!0)],40,Qn)])],2)})),128)),e.countOfAccountsWithAccess?Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",nr,[Object(c["createElementVNode"])("td",rr,[Object(c["createElementVNode"])("button",{class:"btn",onClick:t[0]||(t[0]=function(t){return e.isAddingMeasurable=!0})},Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AddConfiguration")),1)])],512)),[[c["vShow"],!e.isAddingMeasurable]]):Object(c["createCommentVNode"])("",!0),e.countOfAccountsWithAccess?Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",or,[Object(c["createElementVNode"])("td",null,[Object(c["createVNode"])(i,{uicontrol:"site","full-width":!0,modelValue:e.currentSiteToAdd,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.currentSiteToAdd=t}),title:e.translate("CoreHome_ChooseX",e.translate("General_Measurable"))},null,8,["modelValue","title"])]),Object(c["createElementVNode"])("td",cr,[Object(c["createElementVNode"])("div",ar,[Object(c["createVNode"])(i,{uicontrol:"select",modelValue:e.yandexAccountAndHostIdToAdd,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.yandexAccountAndHostIdToAdd=t}),title:e.translate("SearchEngineKeywordsPerformance_UrlOfAccount"),"full-width":!0,options:e.urlOptions},null,8,["modelValue","title","options"])])]),Object(c["createElementVNode"])("td",lr,[Object(c["createElementVNode"])("form",ir,[Object(c["createElementVNode"])("input",{type:"hidden",name:"yandexSiteId",value:null===(n=e.currentSiteToAdd)||void 0===n?void 0:n.id},null,8,sr),Object(c["createElementVNode"])("input",{type:"hidden",name:"addSiteConfigNonce",value:e.addYandexSiteConfigNonce},null,8,ur),Object(c["createElementVNode"])("input",{type:"hidden",name:"yandexAccountAndHostId",value:e.yandexAccountAndHostIdToAdd},null,8,dr),Object(c["createElementVNode"])("input",{type:"submit",class:"btn",value:e.translate("General_Save")},null,8,br)])])],512)),[[c["vShow"],e.isAddingMeasurable]]):Object(c["createCommentVNode"])("",!0)])],512),[[u]])]})),_:1},8,["content-title"])],2)):Object(c["createCommentVNode"])("",!0),e.isClientConfigured?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:1,class:Object(c["normalizeClass"])("oauthconfiguration ".concat(e.isOAuthConfigured?"configured":""," yandex"))},[Object(c["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_ConnectYandexAccounts")},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",mr,[Object(c["createElementVNode"])("h2",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountRemovalConfirm",e.removeAccountName)),1),Object(c["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,Or),Object(c["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,jr)],512),Object(c["createElementVNode"])("div",pr,[e.isOAuthConfigured?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",fr,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_CurrentlyConnectedAccounts",e.countOfAccountsWithAccess)),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",gr,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectFirstAccount")),1)),e.hasOAuthError?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",yr,[Object(c["createVNode"])(s,{context:"error"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthError"))+" ",1),"string"===typeof e.hasOAuthError?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Er,[hr,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.hasOAuthError),1)])):Object(c["createCommentVNode"])("",!0)]})),_:1})])):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",Nr,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.accountsToDisplay,(function(t,n){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:n,class:Object(c["normalizeClass"])("account ".concat(0===Object.keys(t.urls).length||"string"===typeof t.hasError?"invalid":""))},[Object(c["createElementVNode"])("div",vr,[Object(c["createElementVNode"])("img",{src:t.picture},null,8,Sr)]),Object(c["createElementVNode"])("h3",null,Object(c["toDisplayString"])(t.name),1),Object(c["createElementVNode"])("p",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_AccountAddedBy",t.username,t.created_formatted))},null,8,Vr),"string"===typeof t.hasError?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",kr,[Object(c["createElementVNode"])("p",Ar,[Cr,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountConnectionValidationError"))+" "+Object(c["toDisplayString"])(t.hasError),1)]),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ReAuthenticateIfPermanentError")),1)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",wr,[0===Object.keys(t.urls).length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",Br,[Dr,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",_r,[Object.values(t.urls).some((function(e){return e.verified}))?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Tr,[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AvailableSites")),1),Object(c["createElementVNode"])("ul",Pr,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object.entries(t.urls).filter((function(e){var t=Mn(e,2),n=t[1];return n.verified})),(function(e,t){var n=Mn(e,1),r=n[0];return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t},[Kr,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(r),1)])})),128))])])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",xr,[Ur,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_AccountNoAccess")),1)])),Object.values(t.urls).some((function(e){return!e.verified}))?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Mr,[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_UnverifiedSites")),1),Object(c["createElementVNode"])("ul",Ir,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(Object.entries(t.urls).filter((function(e){var t=Mn(e,2),n=t[1];return!n.verified})),(function(e,t){var n=Mn(e,1),r=n[0];return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t},[Lr,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(r),1)])})),128))])])):Object(c["createCommentVNode"])("",!0)]))])),t.authDaysAgo>=180?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",Fr,[Gr,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthAccessTimedOut")),1)])):t.authDaysAgo>=150?(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",Hr,[qr,Object(c["createElementVNode"])("span",{innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_OAuthAccessWillTimeOutSoon",180-t.authDaysAgo))},null,8,Rr)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",{key:4,innerHTML:e.$sanitize(e.translate("SearchEngineKeywordsPerformance_OAuthAccessWillTimeOut",180,180-t.authDaysAgo))},null,8,zr)),Object(c["createElementVNode"])("div",Yr,[Object(c["createElementVNode"])("form",{method:"post",action:e.forwardToYandexAuthUrl},[Object(c["createElementVNode"])("input",{type:"hidden",name:"auth_nonce",value:e.auth_nonce},null,8,Wr),Object(c["createElementVNode"])("button",Xr,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_Reauthenticate")),1)],8,$r),Object(c["createElementVNode"])("form",{method:"POST",action:"",onSubmit:Object(c["withModifiers"])((function(n){return e.removeAccount(t,n)}),["prevent"])},[Object(c["createElementVNode"])("input",{type:"hidden",name:"remove",value:n},null,8,Qr),Object(c["createElementVNode"])("input",{type:"hidden",name:"removeAccountNonce",value:e.removeYandexAccountNonce},null,8,Zr),Object(c["createElementVNode"])("button",eo,Object(c["toDisplayString"])(e.translate("General_Remove")),1)],40,Jr)])],2)})),128)),Object(c["createElementVNode"])("div",to,[no,Object(c["createElementVNode"])("h3",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectAccount")),1),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectAccountDescription","Yandex")),1),Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConnectAccountYandex","180")),1),Object(c["createElementVNode"])("div",ro,[Object(c["createElementVNode"])("form",{method:"post",action:e.forwardToYandexAuthUrl,id:"clientauthform"},[Object(c["createElementVNode"])("input",{type:"hidden",name:"auth_nonce",value:e.auth_nonce},null,8,co),Object(c["createElementVNode"])("button",ao,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_StartOAuth")),1)],8,oo)])]),lo])])]})),_:1},8,["content-title"])],2)):Object(c["createCommentVNode"])("",!0),e.isClientConfigured&&e.userIsSuperUser?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:2,class:Object(c["normalizeClass"])("clientconfiguration ".concat(e.isClientConfigured?"configured":""))},[Object(c["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_OAuthClientConfig")},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("p",null,[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ClientId"))+":",1),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.clientId),1)]),Object(c["createElementVNode"])("p",null,[Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ClientSecret"))+":",1),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.clientSecret),1)])]})),_:1},8,["content-title"])],2)):Object(c["createCommentVNode"])("",!0),e.userIsSuperUser?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",io,[Object(c["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_HowToGetOAuthClientConfig")},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("p",{innerHTML:e.visitOAuthHowTo},null,8,so),Object(c["createElementVNode"])("p",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthExampleText"))+" ",1),uo,Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_YandexFieldUrlToAppSite"))+":",1),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.baseDomain)+" ",1),bo,Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_YandexFieldCallbackUri"))+":",1),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.baseDomainUrl)+"?module=SearchEngineKeywordsPerformance&action=processYandexAuthCode ",1)])]})),_:1},8,["content-title"])])):Object(c["createCommentVNode"])("",!0),e.userIsSuperUser?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:4,class:Object(c["normalizeClass"])(e.isClientConfigured?"":"clientconfiguration")},[Object(c["createVNode"])(l,{"content-title":e.translate("SearchEngineKeywordsPerformance_SetUpOAuthClientConfig")},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("form",mo,[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ProvideYandexClientConfig")),1),Object(c["createVNode"])(i,{uicontrol:"text",name:"clientid",modelValue:e.clientIdToUse,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.clientIdToUse=t}),title:e.translate("SearchEngineKeywordsPerformance_ClientId")},null,8,["modelValue","title"]),Object(c["createVNode"])(i,{uicontrol:"text",name:"clientsecret",modelValue:e.clientSecretToUse,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.clientSecretToUse=t}),title:e.translate("SearchEngineKeywordsPerformance_ClientSecret")},null,8,["modelValue","title"]),Object(c["createElementVNode"])("input",{type:"hidden",name:"config_nonce",value:e.formNonce},null,8,Oo),Object(c["createElementVNode"])("button",jo,Object(c["toDisplayString"])(e.translate("General_Save")),1)])]})),_:1},8,["content-title"])],2)):Object(c["createCommentVNode"])("",!0)])}function fo(e,t){return No(e)||ho(e,t)||yo(e,t)||go()}function go(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yo(e,t){if(e){if("string"===typeof e)return Eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Eo(e,t):void 0}}function Eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ho(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done);a=!0)if(c.push(r.value),t&&c.length===t)break}catch(i){l=!0,o=i}finally{try{a||null==n["return"]||n["return"]()}finally{if(l)throw o}}return c}}function No(e){if(Array.isArray(e))return e}var vo=Object(c["defineComponent"])({props:{isClientConfigured:Boolean,isClientConfigurable:Boolean,isOAuthConfigured:Boolean,clientId:String,clientSecret:String,configuredMeasurables:{type:Object,required:!0},sitesInfos:{type:Object,required:!0},currentSite:{type:Object,required:!0},urlOptions:{type:[Object,Array],required:!0},hasOAuthError:[String,Boolean],accounts:{type:Object,required:!0},auth_nonce:{type:String,required:!0},formNonce:{type:String,required:!0},addYandexSiteConfigNonce:{type:String,required:!0},removeYandexSiteConfigNonce:{type:String,required:!0},removeYandexAccountNonce:{type:String,required:!0},countOfAccountsWithAccess:Number,userIsSuperUser:String,baseDomain:String,baseDomainUrl:String},components:{ContentBlock:s["ContentBlock"],Field:Ke["Field"],Notification:s["Notification"]},directives:{ContentTable:s["ContentTable"]},data:function(){return{removeAccountConfigName:"",removeAccountName:"",isAddingMeasurable:!1,currentSiteToAdd:this.currentSite,yandexAccountAndHostIdToAdd:null,clientIdToUse:"",clientSecretToUse:""}},methods:{removeAccountConfig:function(e,t){var n=this.sitesInfos;this.removeAccountConfigName=n[e].name,s["Matomo"].helper.modalConfirm(this.$refs.confirmRemoveAccountConfig,{yes:function(){t.target.submit()}})},removeAccount:function(e,t){this.removeAccountName=e.name,s["Matomo"].helper.modalConfirm(this.$refs.confirmDeleteAccount,{yes:function(){t.target.submit()}})}},computed:{configuredMeasurablesToDisplay:function(){var e=this,t=Object.entries(this.configuredMeasurables);return Object.fromEntries(t.filter((function(t){var n=fo(t,2),r=n[1],o=r.yandexAccountAndHostId.split("##"),c=fo(o,1),a=c[0];return!!e.accounts[a]})).map((function(t){var n=fo(t,2),r=n[0],o=n[1],c=o.yandexAccountAndHostId.split("##"),a=fo(c,2),l=a[0],i=a[1],s=e.accounts[l],u=s.apiKey,d=Object.entries(s.urls).find((function(e){var t=fo(e,2),n=t[1];return n.host_id===i})),b=null===d||void 0===d?void 0:d[0];return[r,Object.assign(Object.assign({},o),{},{account:l,host:i,hostUrl:b,apiKeyDisplay:xe(u)})]})))},forwardToYandexAuthUrl:function(){return"?".concat(s["MatomoUrl"].stringify(Object.assign(Object.assign({},s["MatomoUrl"].urlParsed.value),{},{action:"forwardToYandexAuth"})))},visitOAuthHowTo:function(){var e=Object(s["externalRawLink"])("https://matomo.org/faq/reports/import-yandex-search-keywords-into-matomo/");return Object(s["translate"])("SearchEngineKeywordsPerformance_VisitOAuthHowTo",'<a target="_blank" href="'.concat(e,'" rel="noreferrer noopener">'),"</a>","Yandex")},accountsToDisplay:function(){var e=Object.entries(this.accounts),t=e.filter((function(e){var t=fo(e,2),n=t[1];return n.hasAccess}));return Object.fromEntries(t)}}});vo.render=po;var So=vo,Vo={class:"form-group row"},ko={class:"col s12"},Ao=Object(c["createElementVNode"])("br",null,null,-1),Co=["innerHTML"],wo=Object(c["createElementVNode"])("br",null,null,-1),Bo=Object(c["createElementVNode"])("br",null,null,-1),Do=Object(c["createElementVNode"])("br",null,null,-1),_o={class:"form-group row"},To={class:"col s12 m6"},Po={id:"configFileUploadForm",action:"",method:"POST",enctype:"multipart/form-data"},Ko=Object(c["createElementVNode"])("input",{type:"hidden",id:"client",name:"client"},null,-1),xo=["value"],Uo=["disabled"],Mo=Object(c["createElementVNode"])("span",{class:"icon-upload"},null,-1),Io=Object(c["createElementVNode"])("span",{class:"icon-upload"},null,-1);function Lo(e,t,n,r,o,a){return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createElementVNode"])("div",Vo,[Object(c["createElementVNode"])("div",ko,[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureTheImporterLabel1")),1),Object(c["createElementVNode"])("p",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_ConfigureTheImporterLabel2")),1),Ao,Object(c["createElementVNode"])("span",{innerHTML:e.$sanitize(e.setupGoogleAnalyticsImportFaq)},null,8,Co)]),Object(c["createElementVNode"])("p",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_OAuthExampleText")),1),wo,Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_GoogleAuthorizedJavaScriptOrigin"))+": ",1),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.baseDomain),1),Bo,Object(c["createElementVNode"])("strong",null,Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_GoogleAuthorizedRedirectUri"))+": ",1),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.baseUrl)+Object(c["toDisplayString"])(e.redirectUri),1),Do])])]),Object(c["createElementVNode"])("div",_o,[Object(c["createElementVNode"])("div",To,[Object(c["createElementVNode"])("form",Po,[Object(c["createElementVNode"])("input",{type:"file",id:"clientfile",name:"clientfile",accept:".json",onChange:t[0]||(t[0]=function(){return e.processFileChange&&e.processFileChange.apply(e,arguments)}),style:{display:"none"}},null,32),Ko,Object(c["createElementVNode"])("input",{type:"hidden",name:"config_nonce",value:e.manualConfigNonce},null,8,xo),Object(c["createElementVNode"])("button",{type:"button",class:"btn",onClick:t[1]||(t[1]=function(t){return e.selectConfigFile()}),disabled:e.isUploadButtonDisabled},[Object(c["withDirectives"])(Object(c["createElementVNode"])("span",null,[Mo,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("General_Upload")),1)],512),[[c["vShow"],!e.isUploadButtonDisabled]]),Object(c["withDirectives"])(Object(c["createElementVNode"])("span",null,[Io,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(e.translate("SearchEngineKeywordsPerformance_Uploading")),1)],512),[[c["vShow"],e.isUploadButtonDisabled]])],8,Uo)])])])],64)}var Fo=Object(c["defineComponent"])({data:function(){return{redirectUri:"?module=SearchEngineKeywordsPerformance&action=processAuthCode",isSelectingFile:!1,isUploading:!1}},props:{manualConfigNonce:{type:String,required:!0},baseDomain:{type:String,required:!0},baseUrl:{type:String,required:!0}},methods:{selectConfigFile:function(){this.isSelectingFile=!0;var e=document.getElementById("clientfile");e&&e.click()},processFileChange:function(){var e=document.getElementById("clientfile"),t=document.getElementById("configFileUploadForm");e&&e.value&&t&&(this.isUploading=!0,t.submit())},checkForCancel:function(){if(this.isSelectingFile&&!this.isUploading){var e=document.getElementById("clientfile");e&&!e.value&&(this.isSelectingFile=!1)}}},computed:{setupGoogleAnalyticsImportFaq:function(){var e=Object(s["externalRawLink"])("https://matomo.org/faq/reports/import-google-search-keywords-in-matomo/#how-to-set-up-google-search-console-and-verify-your-website");return Object(s["translate"])("SearchEngineKeywordsPerformance_ConfigureTheImporterLabel3",'<a href="'.concat(e,'" rel="noreferrer noopener" target="_blank">'),"</a>")},isUploadButtonDisabled:function(){return this.isSelectingFile||this.isUploading}},mounted:function(){document.body.onfocus=this.checkForCancel}});Fo.render=Lo;var Go=Fo;
/**
 * Copyright (C) InnoCraft Ltd - All rights reserved.
 *
 * NOTICE:  All information contained herein is, and remains the property of InnoCraft Ltd.
 * The intellectual and technical concepts contained herein are protected by trade secret
 * or copyright law. Redistribution of this information or reproduction of this material is
 * strictly forbidden unless prior written permission is obtained from InnoCraft Ltd.
 *
 * You shall use this code only in accordance with the license agreement obtained from
 * InnoCraft Ltd.
 *
 * @link https://www.innocraft.com/
 * @license For license details see https://www.innocraft.com/license
 */}})}));
//# sourceMappingURL=SearchEngineKeywordsPerformance.umd.min.js.map